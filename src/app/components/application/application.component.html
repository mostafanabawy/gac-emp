@if(menuLinksService.menuResponse() && itemURL){
<app-bread-crumps [pageName]="pageName" [url]="itemURL"></app-bread-crumps>
}


<div class="flex flex-col lg:flex-row min-h-screen bg-gray-100 gap-3 lg:gap-6 mt-1">

  @if (editApp()) {

  <aside
    class="bg-white shadow-md flex flex-col items-center rounded-t-lg h-fit sticky top-[155px] right-0 transition-all duration-300 max-h-[600px]"
    role="complementary" aria-label="page sections">

    <div class="bg-[#60583d] flex items-center justify-between w-full p-4 rounded-t-lg border-b-4 border-stone-700">
      <h2 class="text-xl font-semibold mb-1 text-white py-2 px-3 flex-1"
        [ngClass]="sidebarCollapsed ? 'hidden hidden-show' : 'block'">
        {{translations()?.sideMenuHeader.label}}
      </h2>

      <button type="button" (click)="toggleSidebar()" class="collapse-button-custom"
        [ngClass]="(sidebarCollapsed || isMobileScreen) ? 'mx-auto' : ''"
        [title]="(sidebarCollapsed || isMobileScreen) ? 'توسيع القائمة' : 'طي القائمة'">
        <img *ngIf="!sidebarCollapsed" src="/assets/images/r-side.svg" alt="طي القائمة"
          class="w-6 h-6 transition-all duration-300">
        <img *ngIf="sidebarCollapsed" src="/assets/images/l-slide.svg" alt="توسيع القائمة"
          class="w-4 h-4 transition-all duration-300">
      </button>
    </div>
    @if(phaseIDs() && phaseIDs().length > 0){
    <div hlMenu class="!block relative w-full" #processMenuWrapper>
      <button class="rounded bg-[#60583d] text-white font-bold px-6 py-3 rounded-t-lg shadow-lg transition-all text-base my-2 flex gap-1
        w-full items-center justify-between" [ngClass]="{'!border-primary bg-gray-200':  openMenus[currentPhase()?.TitleEn]
    }" type="button" (click)="toggleMenu(currentPhase()?.TitleEn)" hlMenuButton>
        {{ store.index.locale === 'en' ? currentPhase()?.TitleEn : currentPhase()?.TitleAr }}
        <span [@reverseChevron]="(!!openMenus[currentPhase()?.TitleEn]).toString()">
          @if(phaseIDs() && phaseIDs().length > 1){
          <icon-chevron-down class="w-4 h-4"></icon-chevron-down>
          }
        </span>
      </button>
      <ul *hlMenuItems @toggleAnimation
        class="top-14 absolute w-full !py-0 font-semibold shadow-sm shadow-primary bg-white text-dark left-0 right-0 z-[999] focus:!outline-none">
        @for(phase of phaseIDs(); track $index){
        <li>
          <button class="block w-full text-gray-600 hover:text-primary px-3 py-2 rounded-md xl:text-base" [ngClass]="{
                '!active !text-primary font-bold !border-primary !bg-primary/5': phase.LookupID === currentPhaseIndex()
              }" (click)="changePhase(phase.LookupID); scrollToTop();" *hlMenuItem="let menuItem">
            {{ store.index.locale == 'en' ? phase.TitleEn : phase.TitleAr }}
          </button>
        </li>
        }
      </ul>
    </div>
    }
    <nav aria-label="page sections first list" class="w-full overflow-scroll hide-scrollbar">
      <ul class="mt-1 space-y-3 w-full px-3" [class]="sidebarCollapsed ? 'mx-auto !p-0 !my-0 !space-y-0' : ''">
        <ng-container *ngFor="let tab of visibleTabs()">
          <li class="accordion menu nav-item" *ngIf="!tabVisible[tab.tabID]">
            <button type="button"
              class="nav-link group w-full text-lg focus:ring-opacity-50 flex gap-2 items-center p-3 pb-4"
              [ngClass]="{ 'text-primary font-semibold active-section': activeDropdown.includes(tab.tabID.toString()) && sidebarCollapsed }"
              (click)="sidebarCollapsed? scrollTo(tab.tabSections[0].SectionID, $event) :toggleAccordion(tab.tabID.toString())">
              <div [title]="sidebarCollapsed? tab.title : ''" class="inline-flex items-center gap-3"
                [ngClass]="activeSection == tab.tabID ? 'border-primary': ''">
                <ng-container *ngIf="tab.icon === 'attachment'" aria-label="attachments tab">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 14.482 15.967">
                      <path id="paperclip-svgrepo-com"
                        d="M7.178,2.819a5.762,5.762,0,0,1,7.9,0,5.241,5.241,0,0,1,0,7.634L9.18,16.1a4.089,4.089,0,0,1-5.611,0,3.735,3.735,0,0,1,0-5.439L9.386,5.1a2.416,2.416,0,0,1,3.318,0,2.23,2.23,0,0,1,0,3.244l-5.86,5.61a.557.557,0,0,1-.77-.8l5.86-5.61a1.116,1.116,0,0,0,0-1.634,1.3,1.3,0,0,0-1.778,0L4.339,11.469a2.622,2.622,0,0,0,0,3.829,2.975,2.975,0,0,0,4.071,0l5.9-5.65a4.127,4.127,0,0,0,0-6.024,4.649,4.649,0,0,0-6.364,0L3.192,8.176a.557.557,0,0,1-.77-.8Z"
                        transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

                <ng-container *ngIf="tab.icon === 'document'" aria-label="application and activity details tab">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 15.235 15.979">
                      <path id="document-add-svgrepo-com_1_" data-name="document-add-svgrepo-com (1)"
                        d="M8.711,1.25h1.57a27.146,27.146,0,0,1,3.294.114,3.5,3.5,0,0,1,2.133.92.557.557,0,0,1-.788.788,2.413,2.413,0,0,0-1.493-.6,26.75,26.75,0,0,0-3.188-.1H8.753a26.749,26.749,0,0,0-3.188.1,2.413,2.413,0,0,0-1.493.6,2.413,2.413,0,0,0-.6,1.493,26.749,26.749,0,0,0-.1,3.188v2.973a26.75,26.75,0,0,0,.1,3.188,2.413,2.413,0,0,0,.6,1.493,2.413,2.413,0,0,0,1.493.6,26.743,26.743,0,0,0,3.188.1h1.486a26.744,26.744,0,0,0,3.188-.1,2.413,2.413,0,0,0,1.493-.6c.517-.517.674-1.321.7-3.2a.557.557,0,1,1,1.115.016c-.026,1.8-.143,3.09-1.027,3.975a3.5,3.5,0,0,1-2.133.92,27.161,27.161,0,0,1-3.294.114H8.711a27.161,27.161,0,0,1-3.294-.114,3.5,3.5,0,0,1-2.133-.92,3.5,3.5,0,0,1-.92-2.133,27.146,27.146,0,0,1-.114-3.294V7.711a27.146,27.146,0,0,1,.114-3.294,3.5,3.5,0,0,1,.92-2.133,3.5,3.5,0,0,1,2.133-.92A27.146,27.146,0,0,1,8.711,1.25Zm5.328,4.307a2.019,2.019,0,0,1,2.855,2.855L13.36,11.946a5.221,5.221,0,0,1-.468.436,3,3,0,0,1-.553.342,5.235,5.235,0,0,1-.6.224l-1.549.516a.951.951,0,0,1-1.2-1.2l.506-1.517.01-.031a5.253,5.253,0,0,1,.224-.6,3,3,0,0,1,.342-.553,5.221,5.221,0,0,1,.436-.468l.023-.023Zm2.067.788a.9.9,0,0,0-1.278,0l-.135.135c.007.025.016.051.025.079a1.928,1.928,0,0,0,1.174,1.174l.079.025.135-.135A.9.9,0,0,0,16.106,6.345ZM15.119,8.61a3.062,3.062,0,0,1-1.278-1.278L11.317,9.856a4.671,4.671,0,0,0-.369.389,1.882,1.882,0,0,0-.214.347,4.65,4.65,0,0,0-.183.5l-.3.892.21.21.892-.3a4.65,4.65,0,0,0,.5-.183,1.882,1.882,0,0,0,.347-.214,4.671,4.671,0,0,0,.389-.369ZM5.966,7.01a.557.557,0,0,1,.557-.557h4.831a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,7.01Zm0,2.973a.557.557,0,0,1,.557-.557H8.381a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,9.982Zm0,2.973a.557.557,0,0,1,.557-.557H7.638a.557.557,0,0,1,0,1.115H6.523A.557.557,0,0,1,5.966,12.955Z"
                        transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>

                </ng-container>

                <!--  <img *ngIf="tab.icon === 'building'" src="/assets/images/Web/Group%2056438.svg"
                          alt="بيانات الشركة والعمل" class="w-8 h-8"> -->
                <ng-container *ngIf="tab.icon === 'building'" aria-label="manager and applicant details tab">
                  <div class="border rounded-full border-gray-600 p-2"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.872 11.291">
                      <g id="user-id-svgrepo-com" transform="translate(-1.25 -3.25)">
                        <path id="Path_82734" data-name="Path 82734"
                          d="M8.024,6.25A1.774,1.774,0,1,0,9.8,8.024,1.774,1.774,0,0,0,8.024,6.25ZM7.218,8.024a.806.806,0,1,1,.806.806A.806.806,0,0,1,7.218,8.024Z"
                          transform="translate(-1.774 -1.064)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82735" data-name="Path 82735"
                          d="M7.315,12.25a4.662,4.662,0,0,0-2.041.429A1.6,1.6,0,0,0,4.25,14.024v.04a1.4,1.4,0,0,0,.523,1.264,2.334,2.334,0,0,0,.964.361,9.15,9.15,0,0,0,1.578.109,9.15,9.15,0,0,0,1.578-.109,2.334,2.334,0,0,0,.964-.361,1.4,1.4,0,0,0,.523-1.264v-.04a1.6,1.6,0,0,0-1.023-1.345A4.662,4.662,0,0,0,7.315,12.25Zm-2.1,1.774c0-.074.073-.272.488-.48a3.709,3.709,0,0,1,1.608-.327,3.709,3.709,0,0,1,1.608.327c.416.208.488.405.488.48,0,.39-.025.45-.122.52a1.423,1.423,0,0,1-.568.192,8.234,8.234,0,0,1-1.406.094,8.234,8.234,0,0,1-1.406-.094,1.424,1.424,0,0,1-.568-.192C5.243,14.474,5.218,14.414,5.218,14.024Z"
                          transform="translate(-1.064 -3.193)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82736" data-name="Path 82736"
                          d="M17.315,12.218a.484.484,0,1,0,0-.968H14.734a.484.484,0,0,0,0,.968Z"
                          transform="translate(-4.613 -2.838)" fill="#707070" />
                        <path id="Path_82737" data-name="Path 82737"
                          d="M17.444,8.734a.484.484,0,0,1-.484.484H13.734a.484.484,0,0,1,0-.968H16.96A.484.484,0,0,1,17.444,8.734Z"
                          transform="translate(-4.258 -1.774)" fill="#707070" />
                        <path id="Path_82738" data-name="Path 82738"
                          d="M17.669,15.218a.484.484,0,1,0,0-.968H15.734a.484.484,0,0,0,0,.968Z"
                          transform="translate(-4.967 -3.903)" fill="#707070" />
                        <path id="Path_82739" data-name="Path 82739"
                          d="M6.859,3.25H9.513a23.566,23.566,0,0,1,2.86.1,3.039,3.039,0,0,1,1.852.8A3.04,3.04,0,0,1,15.023,6a23.579,23.579,0,0,1,.1,2.86v.073a23.579,23.579,0,0,1-.1,2.86,3.04,3.04,0,0,1-.8,1.852,3.04,3.04,0,0,1-1.852.8,23.579,23.579,0,0,1-2.86.1H6.859a23.58,23.58,0,0,1-2.86-.1,3.04,3.04,0,0,1-1.852-.8,3.039,3.039,0,0,1-.8-1.852,23.566,23.566,0,0,1-.1-2.86V8.859A23.567,23.567,0,0,1,1.349,6a3.039,3.039,0,0,1,.8-1.852A3.039,3.039,0,0,1,4,3.349,23.567,23.567,0,0,1,6.859,3.25ZM4.128,4.308a2.1,2.1,0,0,0-1.3.524,2.1,2.1,0,0,0-.524,1.3A23.222,23.222,0,0,0,2.218,8.9a23.223,23.223,0,0,0,.09,2.767,2.1,2.1,0,0,0,.524,1.3,2.1,2.1,0,0,0,1.3.524,23.217,23.217,0,0,0,2.767.09H9.476a23.218,23.218,0,0,0,2.767-.09,2.1,2.1,0,0,0,1.3-.524,2.1,2.1,0,0,0,.524-1.3,23.218,23.218,0,0,0,.09-2.767,23.217,23.217,0,0,0-.09-2.767,2.1,2.1,0,0,0-.524-1.3,2.1,2.1,0,0,0-1.3-.524,23.223,23.223,0,0,0-2.767-.09H6.9A23.222,23.222,0,0,0,4.128,4.308Z"
                          fill-rule="evenodd" />
                      </g>
                    </svg>

                  </div>
                </ng-container>

                <!-- <img *ngIf="tab.icon === 'money'" src="/assets/images/Web/Group%2056441.svg"
                          alt="مستندات الدعم المالي" class="w-8 h-8"> -->
                <ng-container *ngIf="tab.icon === 'money'" aria-label="headquarters and company details tab">
                  <div class="border rounded-full border-gray-600 p-2"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">

                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.494 12.494">
                      <path id="buildings-2-svgrepo-com"
                        d="M6.886,1.25H8.108a10.649,10.649,0,0,1,1.3.046,1.583,1.583,0,0,1,.959.422,1.583,1.583,0,0,1,.422.959,10.648,10.648,0,0,1,.046,1.3v.757c.335,0,.619,0,.854.027a1.616,1.616,0,0,1,.761.243,1.6,1.6,0,0,1,.441.441,1.616,1.616,0,0,1,.243.761c.027.263.027.588.027.977v5.688h.145a.436.436,0,0,1,0,.872H1.686a.436.436,0,1,1,0-.872h.145V7.184c0-.389,0-.714.027-.977A1.616,1.616,0,0,1,2.1,5.447a1.6,1.6,0,0,1,.441-.441A1.616,1.616,0,0,1,3.3,4.763c.235-.024.519-.026.854-.027V3.98a10.649,10.649,0,0,1,.046-1.3,1.583,1.583,0,0,1,.422-.959A1.583,1.583,0,0,1,5.583,1.3,10.648,10.648,0,0,1,6.886,1.25ZM4.156,5.608c-.339,0-.578,0-.765.022a.773.773,0,0,0-.365.1.726.726,0,0,0-.2.2.773.773,0,0,0-.1.365c-.022.213-.022.494-.022.911v5.666H4.156Zm.872,7.264H7.061V11.565a.436.436,0,0,1,.872,0v1.308H9.967V4.01a10.315,10.315,0,0,0-.039-1.217.735.735,0,0,0-.174-.459A.735.735,0,0,0,9.3,2.16a10.308,10.308,0,0,0-1.217-.039H6.916A10.308,10.308,0,0,0,5.7,2.16a.735.735,0,0,0-.459.174.735.735,0,0,0-.174.459A10.307,10.307,0,0,0,5.027,4.01Zm5.811,0h1.453V7.207c0-.417,0-.7-.022-.911a.773.773,0,0,0-.1-.365.727.727,0,0,0-.2-.2.773.773,0,0,0-.365-.1c-.188-.019-.427-.022-.765-.022ZM5.9,3.429a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,3.429Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,5.173Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,6.916Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,8.659Z"
                        transform="translate(-1.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

                <!-- <img *ngIf="tab.icon === 'chart'" src="/assets/images/Web/Group%2056438.svg"
                          alt="مستندات الدعم التجاري" class="w-8 h-8"> -->
                <ng-container *ngIf="tab.icon === 'chart'" aria-label="bussiness name description tab">
                  <div class="border rounded-full p-2 border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.291 12.664">
                      <path id="garage-svgrepo-com"
                        d="M8.819,3.543a1.391,1.391,0,0,0-1.848,0l-3.709,3.3A1.391,1.391,0,0,0,2.8,7.879V14h.927V10.723a11.326,11.326,0,0,1,.049-1.386,1.684,1.684,0,0,1,.449-1.02,1.684,1.684,0,0,1,1.02-.448,11.325,11.325,0,0,1,1.386-.049H9.164a11.325,11.325,0,0,1,1.386.049,1.536,1.536,0,0,1,1.469,1.469,11.327,11.327,0,0,1,.049,1.386V14H13V7.879a1.391,1.391,0,0,0-.467-1.04ZM13.923,14V7.879a2.318,2.318,0,0,0-.778-1.733l-3.709-3.3a2.318,2.318,0,0,0-3.08,0l-3.709,3.3a2.318,2.318,0,0,0-.778,1.733V14H1.714a.464.464,0,1,0,0,.927H14.077a.464.464,0,0,0,0-.927Zm-2.782,0V10.755A10.973,10.973,0,0,0,11.1,9.46a.636.636,0,0,0-.673-.673,10.958,10.958,0,0,0-1.295-.041H6.659a10.959,10.959,0,0,0-1.295.041.782.782,0,0,0-.488.185.782.782,0,0,0-.185.488,10.965,10.965,0,0,0-.041,1.295V14ZM6.2,6.428a.464.464,0,0,1,.464-.464H9.132a.464.464,0,0,1,0,.927H6.659A.464.464,0,0,1,6.2,6.428Zm-.618,4.018a.464.464,0,0,1,.464-.464H9.75a.464.464,0,0,1,0,.927H6.041A.464.464,0,0,1,5.577,10.446Zm0,1.855a.464.464,0,0,1,.464-.464H9.75a.464.464,0,1,1,0,.927H6.041A.464.464,0,0,1,5.577,12.3Z"
                        transform="translate(-1.25 -2.264)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

                <!-- <img *ngIf="tab.icon === 'certificate'" src="/assets/images/Web/Group%2056442.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> -->
                <ng-container *ngIf="tab.icon === 'certificate'" aria-label="terms and conditions">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.042 13.277">
                      <g id="Group_57076" data-name="Group 57076" transform="translate(3485 22672)">
                        <path id="document-medicine-svgrepo-com"
                          d="M7.619,1.25h1.3a22.557,22.557,0,0,1,2.737.095,2.909,2.909,0,0,1,1.772.765A2.91,2.91,0,0,1,14.2,3.881a22.569,22.569,0,0,1,.095,2.737v2.54A22.569,22.569,0,0,1,14.2,11.9a2.91,2.91,0,0,1-.765,1.772,2.91,2.91,0,0,1-1.772.765,22.569,22.569,0,0,1-2.737.095h-1.3a22.57,22.57,0,0,1-2.737-.095,2.91,2.91,0,0,1-1.772-.765A2.909,2.909,0,0,1,2.345,11.9,22.557,22.557,0,0,1,2.25,9.159V6.619a22.557,22.557,0,0,1,.095-2.737,2.909,2.909,0,0,1,.765-1.772,2.909,2.909,0,0,1,1.772-.765A22.557,22.557,0,0,1,7.619,1.25ZM5,2.263a2.005,2.005,0,0,0-1.241.5A2.005,2.005,0,0,0,3.263,4a22.227,22.227,0,0,0-.086,2.649v2.47a22.228,22.228,0,0,0,.086,2.649,2.005,2.005,0,0,0,.5,1.241,2.005,2.005,0,0,0,1.241.5,22.222,22.222,0,0,0,2.649.086H8.889a22.223,22.223,0,0,0,2.649-.086,2.005,2.005,0,0,0,1.241-.5,2.005,2.005,0,0,0,.5-1.241,22.223,22.223,0,0,0,.086-2.649V6.654A22.222,22.222,0,0,0,13.28,4a2.005,2.005,0,0,0-.5-1.241,2.005,2.005,0,0,0-1.241-.5,22.228,22.228,0,0,0-2.649-.086H7.654A22.227,22.227,0,0,0,5,2.263Zm.333,6.861A.463.463,0,0,1,5.8,8.661h4.94a.463.463,0,0,1,0,.926H5.8A.463.463,0,0,1,5.338,9.124Zm.618,2.47a.463.463,0,0,1,.463-.463h3.705a.463.463,0,0,1,0,.926H6.418A.463.463,0,0,1,5.955,11.594Z"
                          transform="translate(-3487.25 -22673.25)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82744" data-name="Path 82744"
                          d="M8.491,14.367a.463.463,0,0,1,.038.654L6.883,16.874a.463.463,0,0,1-.692,0l-.823-.926a.463.463,0,1,1,.692-.615l.477.537,1.3-1.463A.463.463,0,0,1,8.491,14.367Z"
                          transform="translate(-3485.927 -22683.162)" fill-rule="evenodd" />
                      </g>
                    </svg>

                  </div>

                </ng-container>
                <!-- <img *ngIf="tab.icon === 'certificates'" src="/assets/images/Web/Group%2057224.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> -->
                <ng-container *ngIf="tab.icon === 'certificates'" aria-label="remarks">
                  <svg class="scale-[1.1]" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                    viewBox="0 0 28 28">
                    <g id="Group_57224" data-name="Group 57224" transform="translate(-1775 -855)">
                      <g id="Group_56441" data-name="Group 56441" transform="translate(-18 389)">
                        <g id="Ellipse_28" data-name="Ellipse 28" transform="translate(1793 466)" fill="none"
                          stroke="#9f956c" stroke-width="1">
                          <circle cx="14" cy="14" r="14" stroke="none" />
                          <circle cx="14" cy="14" r="13.5" fill="none" />
                        </g>
                      </g>
                      <g id="shield-check-svgrepo-com_1_" data-name="shield-check-svgrepo-com (1)"
                        transform="translate(1780.75 860.75)">
                        <path id="Path_82778" data-name="Path 82778"
                          d="M12.95,10.082a.5.5,0,0,0-.745-.665l-2,2.245-.578-.648a.5.5,0,1,0-.745.665l.951,1.065a.5.5,0,0,0,.745,0Z"
                          transform="translate(-2.174 -2.675)" fill="#9f946d" />
                        <path id="Path_82779" data-name="Path 82779"
                          d="M8.74,1.25a6.928,6.928,0,0,0-2.181.533l-.484.166c-.986.338-1.747.6-2.292.819a5.692,5.692,0,0,0-.7.33,1.516,1.516,0,0,0-.491.416,1.55,1.55,0,0,0-.227.6,5.893,5.893,0,0,0-.083.772c-.032.59-.032,1.4-.032,2.448V8.4a7.433,7.433,0,0,0,4.891,6.8l.018.008a4.4,4.4,0,0,0,.683.254,3.52,3.52,0,0,0,.9.094,3.52,3.52,0,0,0,.9-.094,4.4,4.4,0,0,0,.683-.254l.018-.008a7.432,7.432,0,0,0,4.891-6.8V7.334c0-1.049,0-1.858-.032-2.448a5.891,5.891,0,0,0-.083-.772,1.55,1.55,0,0,0-.227-.6A1.516,1.516,0,0,0,14.4,3.1a5.694,5.694,0,0,0-.7-.33c-.545-.221-1.306-.482-2.292-.819l-.484-.166A6.928,6.928,0,0,0,8.74,1.25ZM6.8,2.757A6.469,6.469,0,0,1,8.74,2.248a6.469,6.469,0,0,1,1.943.509l.381.131c1.007.345,1.741.6,2.257.806a4.749,4.749,0,0,1,.575.268,1.092,1.092,0,0,1,.139.093.256.256,0,0,1,.036.034.271.271,0,0,1,.021.049,1.157,1.157,0,0,1,.042.165,4.94,4.94,0,0,1,.066.638c.03.56.031,1.341.031,2.412V8.4a6.439,6.439,0,0,1-4.292,5.89,3.606,3.606,0,0,1-.549.21,2.546,2.546,0,0,1-.65.063,2.546,2.546,0,0,1-.65-.063,3.606,3.606,0,0,1-.549-.21A6.439,6.439,0,0,1,3.248,8.4V7.351c0-1.071,0-1.852.031-2.412A4.951,4.951,0,0,1,3.345,4.3a1.156,1.156,0,0,1,.042-.165.272.272,0,0,1,.021-.049.257.257,0,0,1,.036-.034,1.1,1.1,0,0,1,.139-.093,4.75,4.75,0,0,1,.575-.268c.516-.209,1.25-.461,2.257-.806Z"
                          fill-rule="evenodd" />
                      </g>
                    </g>
                  </svg>
                </ng-container>

              </div>
              <span [class]="sidebarCollapsed ? 'hidden hidden-show' : ''">
                {{ tab.title }}
              </span>
            </button>
            @if (!sidebarCollapsed) {
            <div [@slideDownUp]="!activeDropdown.includes(tab.tabID.toString())" class="accordion-content">
              <ul class="sub-menu text-gray-500">
                <ng-container *ngFor="let child of getAllSections(tab.tabID)">
                  <li>
                    <a [href]="'#'+ child.SectionID" (click)="scrollTo(child.SectionID, $event)"
                      aria-label="attachments section"
                      class="items-center p-3 duration-200 text-lg pb-4 focus:text-primary focus:ring-opacity-50 flex gap-2"
                      [ngClass]="{
                    'text-primary font-semibold active-section': activeSection == child.SectionID
                  }" [class.border-none]="sidebarCollapsed" [title]="sidebarCollapsed? tab.TitleEn : ''"
                      [class]="sidebarCollapsed ? 'mx-auto !p-2 !my-0 w-full' : ''">
                      @if(activeSection == child.SectionID){
                      @if (store.index.locale == 'en') {
                      <icon-location-arrow-right class="w-4 text-primary"></icon-location-arrow-right>
                      }@else{
                      <icon-location-arrow-left class="w-4 text-primary"></icon-location-arrow-left>
                      }

                      }@else{
                      -
                      }
                      {{ store.index.locale == 'en' ? child.TitleEn : child.TitleAr }}
                    </a>
                  </li>
                </ng-container>
              </ul>
            </div>
            }
          </li>
          <!--  <li *ngIf="!tabVisible[tab.tabID]">
            <a [href]="'#'+ tab.tabID" (click)="scrollTo(tab.tabID, $event)" [ngClass]="{
                    'text-primary font-semibold active-section': activeSection == tab.tabID
                  }" aria-label="attachments section"
              class="items-center p-3 duration-200 text-lg pb-4 focus:text-primary focus:ring-opacity-50 flex gap-2"
              [class.border-none]="sidebarCollapsed" [title]="sidebarCollapsed? tab.title : ''"
              [class]="sidebarCollapsed ? 'mx-auto !p-2 !my-0 w-full' : ''">
              <div [title]="sidebarCollapsed? tab.title : ''" class="inline-flex items-center gap-3"
                [ngClass]="activeSection == tab.tabID ? 'border-primary': ''">
                <ng-container *ngIf="tab.icon === 'attachment'" aria-label="attachments tab">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 14.482 15.967">
                      <path id="paperclip-svgrepo-com"
                        d="M7.178,2.819a5.762,5.762,0,0,1,7.9,0,5.241,5.241,0,0,1,0,7.634L9.18,16.1a4.089,4.089,0,0,1-5.611,0,3.735,3.735,0,0,1,0-5.439L9.386,5.1a2.416,2.416,0,0,1,3.318,0,2.23,2.23,0,0,1,0,3.244l-5.86,5.61a.557.557,0,0,1-.77-.8l5.86-5.61a1.116,1.116,0,0,0,0-1.634,1.3,1.3,0,0,0-1.778,0L4.339,11.469a2.622,2.622,0,0,0,0,3.829,2.975,2.975,0,0,0,4.071,0l5.9-5.65a4.127,4.127,0,0,0,0-6.024,4.649,4.649,0,0,0-6.364,0L3.192,8.176a.557.557,0,0,1-.77-.8Z"
                        transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

                <ng-container *ngIf="tab.icon === 'document'" aria-label="application and activity details tab">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 15.235 15.979">
                      <path id="document-add-svgrepo-com_1_" data-name="document-add-svgrepo-com (1)"
                        d="M8.711,1.25h1.57a27.146,27.146,0,0,1,3.294.114,3.5,3.5,0,0,1,2.133.92.557.557,0,0,1-.788.788,2.413,2.413,0,0,0-1.493-.6,26.75,26.75,0,0,0-3.188-.1H8.753a26.749,26.749,0,0,0-3.188.1,2.413,2.413,0,0,0-1.493.6,2.413,2.413,0,0,0-.6,1.493,26.749,26.749,0,0,0-.1,3.188v2.973a26.75,26.75,0,0,0,.1,3.188,2.413,2.413,0,0,0,.6,1.493,2.413,2.413,0,0,0,1.493.6,26.743,26.743,0,0,0,3.188.1h1.486a26.744,26.744,0,0,0,3.188-.1,2.413,2.413,0,0,0,1.493-.6c.517-.517.674-1.321.7-3.2a.557.557,0,1,1,1.115.016c-.026,1.8-.143,3.09-1.027,3.975a3.5,3.5,0,0,1-2.133.92,27.161,27.161,0,0,1-3.294.114H8.711a27.161,27.161,0,0,1-3.294-.114,3.5,3.5,0,0,1-2.133-.92,3.5,3.5,0,0,1-.92-2.133,27.146,27.146,0,0,1-.114-3.294V7.711a27.146,27.146,0,0,1,.114-3.294,3.5,3.5,0,0,1,.92-2.133,3.5,3.5,0,0,1,2.133-.92A27.146,27.146,0,0,1,8.711,1.25Zm5.328,4.307a2.019,2.019,0,0,1,2.855,2.855L13.36,11.946a5.221,5.221,0,0,1-.468.436,3,3,0,0,1-.553.342,5.235,5.235,0,0,1-.6.224l-1.549.516a.951.951,0,0,1-1.2-1.2l.506-1.517.01-.031a5.253,5.253,0,0,1,.224-.6,3,3,0,0,1,.342-.553,5.221,5.221,0,0,1,.436-.468l.023-.023Zm2.067.788a.9.9,0,0,0-1.278,0l-.135.135c.007.025.016.051.025.079a1.928,1.928,0,0,0,1.174,1.174l.079.025.135-.135A.9.9,0,0,0,16.106,6.345ZM15.119,8.61a3.062,3.062,0,0,1-1.278-1.278L11.317,9.856a4.671,4.671,0,0,0-.369.389,1.882,1.882,0,0,0-.214.347,4.65,4.65,0,0,0-.183.5l-.3.892.21.21.892-.3a4.65,4.65,0,0,0,.5-.183,1.882,1.882,0,0,0,.347-.214,4.671,4.671,0,0,0,.389-.369ZM5.966,7.01a.557.557,0,0,1,.557-.557h4.831a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,7.01Zm0,2.973a.557.557,0,0,1,.557-.557H8.381a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,9.982Zm0,2.973a.557.557,0,0,1,.557-.557H7.638a.557.557,0,0,1,0,1.115H6.523A.557.557,0,0,1,5.966,12.955Z"
                        transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>

                </ng-container>

                <img *ngIf="tab.icon === 'building'" src="/assets/images/Web/Group%2056438.svg"
                          alt="بيانات الشركة والعمل" class="w-8 h-8"> 
                <ng-container *ngIf="tab.icon === 'building'" aria-label="manager and applicant details tab">
                  <div class="border rounded-full border-gray-600 p-2"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.872 11.291">
                      <g id="user-id-svgrepo-com" transform="translate(-1.25 -3.25)">
                        <path id="Path_82734" data-name="Path 82734"
                          d="M8.024,6.25A1.774,1.774,0,1,0,9.8,8.024,1.774,1.774,0,0,0,8.024,6.25ZM7.218,8.024a.806.806,0,1,1,.806.806A.806.806,0,0,1,7.218,8.024Z"
                          transform="translate(-1.774 -1.064)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82735" data-name="Path 82735"
                          d="M7.315,12.25a4.662,4.662,0,0,0-2.041.429A1.6,1.6,0,0,0,4.25,14.024v.04a1.4,1.4,0,0,0,.523,1.264,2.334,2.334,0,0,0,.964.361,9.15,9.15,0,0,0,1.578.109,9.15,9.15,0,0,0,1.578-.109,2.334,2.334,0,0,0,.964-.361,1.4,1.4,0,0,0,.523-1.264v-.04a1.6,1.6,0,0,0-1.023-1.345A4.662,4.662,0,0,0,7.315,12.25Zm-2.1,1.774c0-.074.073-.272.488-.48a3.709,3.709,0,0,1,1.608-.327,3.709,3.709,0,0,1,1.608.327c.416.208.488.405.488.48,0,.39-.025.45-.122.52a1.423,1.423,0,0,1-.568.192,8.234,8.234,0,0,1-1.406.094,8.234,8.234,0,0,1-1.406-.094,1.424,1.424,0,0,1-.568-.192C5.243,14.474,5.218,14.414,5.218,14.024Z"
                          transform="translate(-1.064 -3.193)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82736" data-name="Path 82736"
                          d="M17.315,12.218a.484.484,0,1,0,0-.968H14.734a.484.484,0,0,0,0,.968Z"
                          transform="translate(-4.613 -2.838)" fill="#707070" />
                        <path id="Path_82737" data-name="Path 82737"
                          d="M17.444,8.734a.484.484,0,0,1-.484.484H13.734a.484.484,0,0,1,0-.968H16.96A.484.484,0,0,1,17.444,8.734Z"
                          transform="translate(-4.258 -1.774)" fill="#707070" />
                        <path id="Path_82738" data-name="Path 82738"
                          d="M17.669,15.218a.484.484,0,1,0,0-.968H15.734a.484.484,0,0,0,0,.968Z"
                          transform="translate(-4.967 -3.903)" fill="#707070" />
                        <path id="Path_82739" data-name="Path 82739"
                          d="M6.859,3.25H9.513a23.566,23.566,0,0,1,2.86.1,3.039,3.039,0,0,1,1.852.8A3.04,3.04,0,0,1,15.023,6a23.579,23.579,0,0,1,.1,2.86v.073a23.579,23.579,0,0,1-.1,2.86,3.04,3.04,0,0,1-.8,1.852,3.04,3.04,0,0,1-1.852.8,23.579,23.579,0,0,1-2.86.1H6.859a23.58,23.58,0,0,1-2.86-.1,3.04,3.04,0,0,1-1.852-.8,3.039,3.039,0,0,1-.8-1.852,23.566,23.566,0,0,1-.1-2.86V8.859A23.567,23.567,0,0,1,1.349,6a3.039,3.039,0,0,1,.8-1.852A3.039,3.039,0,0,1,4,3.349,23.567,23.567,0,0,1,6.859,3.25ZM4.128,4.308a2.1,2.1,0,0,0-1.3.524,2.1,2.1,0,0,0-.524,1.3A23.222,23.222,0,0,0,2.218,8.9a23.223,23.223,0,0,0,.09,2.767,2.1,2.1,0,0,0,.524,1.3,2.1,2.1,0,0,0,1.3.524,23.217,23.217,0,0,0,2.767.09H9.476a23.218,23.218,0,0,0,2.767-.09,2.1,2.1,0,0,0,1.3-.524,2.1,2.1,0,0,0,.524-1.3,23.218,23.218,0,0,0,.09-2.767,23.217,23.217,0,0,0-.09-2.767,2.1,2.1,0,0,0-.524-1.3,2.1,2.1,0,0,0-1.3-.524,23.223,23.223,0,0,0-2.767-.09H6.9A23.222,23.222,0,0,0,4.128,4.308Z"
                          fill-rule="evenodd" />
                      </g>
                    </svg>

                  </div>
                </ng-container>

                 <img *ngIf="tab.icon === 'money'" src="/assets/images/Web/Group%2056441.svg"
                          alt="مستندات الدعم المالي" class="w-8 h-8">
                <ng-container *ngIf="tab.icon === 'money'" aria-label="headquarters and company details tab">
                  <div class="border rounded-full border-gray-600 p-2"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">

                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.494 12.494">
                      <path id="buildings-2-svgrepo-com"
                        d="M6.886,1.25H8.108a10.649,10.649,0,0,1,1.3.046,1.583,1.583,0,0,1,.959.422,1.583,1.583,0,0,1,.422.959,10.648,10.648,0,0,1,.046,1.3v.757c.335,0,.619,0,.854.027a1.616,1.616,0,0,1,.761.243,1.6,1.6,0,0,1,.441.441,1.616,1.616,0,0,1,.243.761c.027.263.027.588.027.977v5.688h.145a.436.436,0,0,1,0,.872H1.686a.436.436,0,1,1,0-.872h.145V7.184c0-.389,0-.714.027-.977A1.616,1.616,0,0,1,2.1,5.447a1.6,1.6,0,0,1,.441-.441A1.616,1.616,0,0,1,3.3,4.763c.235-.024.519-.026.854-.027V3.98a10.649,10.649,0,0,1,.046-1.3,1.583,1.583,0,0,1,.422-.959A1.583,1.583,0,0,1,5.583,1.3,10.648,10.648,0,0,1,6.886,1.25ZM4.156,5.608c-.339,0-.578,0-.765.022a.773.773,0,0,0-.365.1.726.726,0,0,0-.2.2.773.773,0,0,0-.1.365c-.022.213-.022.494-.022.911v5.666H4.156Zm.872,7.264H7.061V11.565a.436.436,0,0,1,.872,0v1.308H9.967V4.01a10.315,10.315,0,0,0-.039-1.217.735.735,0,0,0-.174-.459A.735.735,0,0,0,9.3,2.16a10.308,10.308,0,0,0-1.217-.039H6.916A10.308,10.308,0,0,0,5.7,2.16a.735.735,0,0,0-.459.174.735.735,0,0,0-.174.459A10.307,10.307,0,0,0,5.027,4.01Zm5.811,0h1.453V7.207c0-.417,0-.7-.022-.911a.773.773,0,0,0-.1-.365.727.727,0,0,0-.2-.2.773.773,0,0,0-.365-.1c-.188-.019-.427-.022-.765-.022ZM5.9,3.429a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,3.429Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,5.173Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,6.916Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,8.659Z"
                        transform="translate(-1.25 -1.25)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

                 <img *ngIf="tab.icon === 'chart'" src="/assets/images/Web/Group%2056438.svg"
                          alt="مستندات الدعم التجاري" class="w-8 h-8"> 
                <ng-container *ngIf="tab.icon === 'chart'" aria-label="bussiness name description tab">
                  <div class="border rounded-full p-2 border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.291 12.664">
                      <path id="garage-svgrepo-com"
                        d="M8.819,3.543a1.391,1.391,0,0,0-1.848,0l-3.709,3.3A1.391,1.391,0,0,0,2.8,7.879V14h.927V10.723a11.326,11.326,0,0,1,.049-1.386,1.684,1.684,0,0,1,.449-1.02,1.684,1.684,0,0,1,1.02-.448,11.325,11.325,0,0,1,1.386-.049H9.164a11.325,11.325,0,0,1,1.386.049,1.536,1.536,0,0,1,1.469,1.469,11.327,11.327,0,0,1,.049,1.386V14H13V7.879a1.391,1.391,0,0,0-.467-1.04ZM13.923,14V7.879a2.318,2.318,0,0,0-.778-1.733l-3.709-3.3a2.318,2.318,0,0,0-3.08,0l-3.709,3.3a2.318,2.318,0,0,0-.778,1.733V14H1.714a.464.464,0,1,0,0,.927H14.077a.464.464,0,0,0,0-.927Zm-2.782,0V10.755A10.973,10.973,0,0,0,11.1,9.46a.636.636,0,0,0-.673-.673,10.958,10.958,0,0,0-1.295-.041H6.659a10.959,10.959,0,0,0-1.295.041.782.782,0,0,0-.488.185.782.782,0,0,0-.185.488,10.965,10.965,0,0,0-.041,1.295V14ZM6.2,6.428a.464.464,0,0,1,.464-.464H9.132a.464.464,0,0,1,0,.927H6.659A.464.464,0,0,1,6.2,6.428Zm-.618,4.018a.464.464,0,0,1,.464-.464H9.75a.464.464,0,0,1,0,.927H6.041A.464.464,0,0,1,5.577,10.446Zm0,1.855a.464.464,0,0,1,.464-.464H9.75a.464.464,0,1,1,0,.927H6.041A.464.464,0,0,1,5.577,12.3Z"
                        transform="translate(-1.25 -2.264)" fill-rule="evenodd" />
                    </svg>

                  </div>
                </ng-container>

               <img *ngIf="tab.icon === 'certificate'" src="/assets/images/Web/Group%2056442.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> 
                <ng-container *ngIf="tab.icon === 'certificate'" aria-label="terms and conditions">
                  <div class="border p-2 rounded-full border-gray-600"
                    [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.042 13.277">
                      <g id="Group_57076" data-name="Group 57076" transform="translate(3485 22672)">
                        <path id="document-medicine-svgrepo-com"
                          d="M7.619,1.25h1.3a22.557,22.557,0,0,1,2.737.095,2.909,2.909,0,0,1,1.772.765A2.91,2.91,0,0,1,14.2,3.881a22.569,22.569,0,0,1,.095,2.737v2.54A22.569,22.569,0,0,1,14.2,11.9a2.91,2.91,0,0,1-.765,1.772,2.91,2.91,0,0,1-1.772.765,22.569,22.569,0,0,1-2.737.095h-1.3a22.57,22.57,0,0,1-2.737-.095,2.91,2.91,0,0,1-1.772-.765A2.909,2.909,0,0,1,2.345,11.9,22.557,22.557,0,0,1,2.25,9.159V6.619a22.557,22.557,0,0,1,.095-2.737,2.909,2.909,0,0,1,.765-1.772,2.909,2.909,0,0,1,1.772-.765A22.557,22.557,0,0,1,7.619,1.25ZM5,2.263a2.005,2.005,0,0,0-1.241.5A2.005,2.005,0,0,0,3.263,4a22.227,22.227,0,0,0-.086,2.649v2.47a22.228,22.228,0,0,0,.086,2.649,2.005,2.005,0,0,0,.5,1.241,2.005,2.005,0,0,0,1.241.5,22.222,22.222,0,0,0,2.649.086H8.889a22.223,22.223,0,0,0,2.649-.086,2.005,2.005,0,0,0,1.241-.5,2.005,2.005,0,0,0,.5-1.241,22.223,22.223,0,0,0,.086-2.649V6.654A22.222,22.222,0,0,0,13.28,4a2.005,2.005,0,0,0-.5-1.241,2.005,2.005,0,0,0-1.241-.5,22.228,22.228,0,0,0-2.649-.086H7.654A22.227,22.227,0,0,0,5,2.263Zm.333,6.861A.463.463,0,0,1,5.8,8.661h4.94a.463.463,0,0,1,0,.926H5.8A.463.463,0,0,1,5.338,9.124Zm.618,2.47a.463.463,0,0,1,.463-.463h3.705a.463.463,0,0,1,0,.926H6.418A.463.463,0,0,1,5.955,11.594Z"
                          transform="translate(-3487.25 -22673.25)" fill="#707070" fill-rule="evenodd" />
                        <path id="Path_82744" data-name="Path 82744"
                          d="M8.491,14.367a.463.463,0,0,1,.038.654L6.883,16.874a.463.463,0,0,1-.692,0l-.823-.926a.463.463,0,1,1,.692-.615l.477.537,1.3-1.463A.463.463,0,0,1,8.491,14.367Z"
                          transform="translate(-3485.927 -22683.162)" fill-rule="evenodd" />
                      </g>
                    </svg>

                  </div>

                </ng-container>
                 <img *ngIf="tab.icon === 'certificates'" src="/assets/images/Web/Group%2057224.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> 
                <ng-container *ngIf="tab.icon === 'certificates'" aria-label="remarks">
                  <svg class="scale-[1.1]" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                    viewBox="0 0 28 28">
                    <g id="Group_57224" data-name="Group 57224" transform="translate(-1775 -855)">
                      <g id="Group_56441" data-name="Group 56441" transform="translate(-18 389)">
                        <g id="Ellipse_28" data-name="Ellipse 28" transform="translate(1793 466)" fill="none"
                          stroke="#9f956c" stroke-width="1">
                          <circle cx="14" cy="14" r="14" stroke="none" />
                          <circle cx="14" cy="14" r="13.5" fill="none" />
                        </g>
                      </g>
                      <g id="shield-check-svgrepo-com_1_" data-name="shield-check-svgrepo-com (1)"
                        transform="translate(1780.75 860.75)">
                        <path id="Path_82778" data-name="Path 82778"
                          d="M12.95,10.082a.5.5,0,0,0-.745-.665l-2,2.245-.578-.648a.5.5,0,1,0-.745.665l.951,1.065a.5.5,0,0,0,.745,0Z"
                          transform="translate(-2.174 -2.675)" fill="#9f946d" />
                        <path id="Path_82779" data-name="Path 82779"
                          d="M8.74,1.25a6.928,6.928,0,0,0-2.181.533l-.484.166c-.986.338-1.747.6-2.292.819a5.692,5.692,0,0,0-.7.33,1.516,1.516,0,0,0-.491.416,1.55,1.55,0,0,0-.227.6,5.893,5.893,0,0,0-.083.772c-.032.59-.032,1.4-.032,2.448V8.4a7.433,7.433,0,0,0,4.891,6.8l.018.008a4.4,4.4,0,0,0,.683.254,3.52,3.52,0,0,0,.9.094,3.52,3.52,0,0,0,.9-.094,4.4,4.4,0,0,0,.683-.254l.018-.008a7.432,7.432,0,0,0,4.891-6.8V7.334c0-1.049,0-1.858-.032-2.448a5.891,5.891,0,0,0-.083-.772,1.55,1.55,0,0,0-.227-.6A1.516,1.516,0,0,0,14.4,3.1a5.694,5.694,0,0,0-.7-.33c-.545-.221-1.306-.482-2.292-.819l-.484-.166A6.928,6.928,0,0,0,8.74,1.25ZM6.8,2.757A6.469,6.469,0,0,1,8.74,2.248a6.469,6.469,0,0,1,1.943.509l.381.131c1.007.345,1.741.6,2.257.806a4.749,4.749,0,0,1,.575.268,1.092,1.092,0,0,1,.139.093.256.256,0,0,1,.036.034.271.271,0,0,1,.021.049,1.157,1.157,0,0,1,.042.165,4.94,4.94,0,0,1,.066.638c.03.56.031,1.341.031,2.412V8.4a6.439,6.439,0,0,1-4.292,5.89,3.606,3.606,0,0,1-.549.21,2.546,2.546,0,0,1-.65.063,2.546,2.546,0,0,1-.65-.063,3.606,3.606,0,0,1-.549-.21A6.439,6.439,0,0,1,3.248,8.4V7.351c0-1.071,0-1.852.031-2.412A4.951,4.951,0,0,1,3.345,4.3a1.156,1.156,0,0,1,.042-.165.272.272,0,0,1,.021-.049.257.257,0,0,1,.036-.034,1.1,1.1,0,0,1,.139-.093,4.75,4.75,0,0,1,.575-.268c.516-.209,1.25-.461,2.257-.806Z"
                          fill-rule="evenodd" />
                      </g>
                    </g>
                  </svg>
                </ng-container>

              </div>
              <span [class]="sidebarCollapsed ? 'hidden hidden-show' : 'flex-1'">
                {{ tab.title }}
              </span>
            </a>
          </li> -->
        </ng-container>
      </ul>
    </nav>


  </aside>
  }@else{

  <aside
    class="bg-white shadow-md flex flex-col items-center rounded-t-lg h-fit sticky top-[155px] right-0 transition-all duration-300 max-h-[600px]"
    role="complementary" aria-label="page sections">
    <div class="bg-[#60583d] flex items-center justify-between w-full p-4 rounded-t-lg border-b-4 border-stone-700">
      <h2 class="text-xl font-semibold mb-1 text-white py-2 px-3 flex-1"
        [ngClass]="sidebarCollapsed ? 'hidden hidden-show' : 'block'">{{translations()?.sideMenuHeader.label}}</h2>
      <button type="button" (click)="toggleSidebar()" class="collapse-button-custom"
        [ngClass]="(sidebarCollapsed || isMobileScreen) ? 'mx-auto' : ''"
        [title]="(sidebarCollapsed || isMobileScreen) ? 'توسيع القائمة' : 'طي القائمة'">
        <img *ngIf="!sidebarCollapsed" src="/assets/images/r-side.svg" alt="طي القائمة"
          class="w-6 h-6 transition-all duration-300">
        <img *ngIf="sidebarCollapsed" src="/assets/images/l-slide.svg" alt="توسيع القائمة"
          class="w-4 h-4 transition-all duration-300">
      </button>
    </div>
    @if(phaseIDs() && phaseIDs().length > 0){
    <div hlMenu class="!block relative w-full" #processMenuWrapper>
      <button class="rounded bg-[#60583d] text-white font-bold px-6 py-3 rounded-t-lg shadow-lg transition-all text-base my-2 flex gap-1
        w-full items-center justify-between" [ngClass]="{'!border-primary bg-gray-200':  openMenus[currentPhase()?.TitleEn]
    }" type="button" (click)="toggleMenu(currentPhase()?.TitleEn)" hlMenuButton>
        {{ store.index.locale === 'en' ? currentPhase()?.TitleEn : currentPhase()?.TitleAr }}
        @if(phaseIDs() && phaseIDs().length > 1){
        <icon-chevron-down class="w-4 h-4"></icon-chevron-down>
        }
      </button>
      <ul *hlMenuItems @toggleAnimation
        class="top-14 absolute w-full !py-0 font-semibold shadow-sm shadow-primary bg-white text-dark left-0 right-0 z-[999] focus:!outline-none">
        @for(phase of phaseIDs(); track $index){
        <li>
          <button class="block w-full text-gray-600 hover:text-primary px-3 py-2 rounded-md xl:text-base" [ngClass]="{
                '!active !text-primary font-bold !border-primary !bg-primary/5': phase.LookupID === currentPhaseIndex()
              }" (click)="changePhase(phase.LookupID)" *hlMenuItem="let menuItem">
            {{ store.index.locale == 'en' ? phase.TitleEn : phase.TitleAr }}
          </button>
        </li>
        }
      </ul>
    </div>
    }
    <nav aria-label="page sections first list" class="w-full overflow-scroll hide-scrollbar">
      <ul class="mt-1 space-y-3 w-full px-3"
        [class]="sidebarCollapsed ? 'mx-auto !p-0 !my-0 !space-y-0 flex flex-col items-center' : ''">
        @if(visibleTabs()){
        <div *ngFor="let tab of visibleTabs(); let i = index">
          <button [title]="sidebarCollapsed? tab.title : ''"
            (click)="!tab.isAccessible ? '' : toggleAccordion(tab.tabID.toString())"
            [ngClass]="{ 'text-primary font-semibold active-section': activeDropdown.includes(tab.tabID.toString()) && sidebarCollapsed }"
            class="tab-item-custom relative" [class.active]="tab.isActive" [class.completed]="tab.isCompleted"
            [class.disabled]="!tab.isAccessible" [class.collapsed]="sidebarCollapsed">
            <div class="flex items-center w-full justify-between">
              <div class="flex items-center gap-3 relative">
                <div class="tab-main-icon">
                  <!-- <img *ngIf="tab.icon === 'attachment'" src="/assets/images/Web/Group 56439.svg" alt="attachment"
                          class="w-8 h-8"> -->

                  <ng-container *ngIf="tab.icon === 'attachment'" aria-label="attachments tab">
                    <div class="border p-2 rounded-full border-gray-600"
                      [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 14.482 15.967">
                        <path id="paperclip-svgrepo-com"
                          d="M7.178,2.819a5.762,5.762,0,0,1,7.9,0,5.241,5.241,0,0,1,0,7.634L9.18,16.1a4.089,4.089,0,0,1-5.611,0,3.735,3.735,0,0,1,0-5.439L9.386,5.1a2.416,2.416,0,0,1,3.318,0,2.23,2.23,0,0,1,0,3.244l-5.86,5.61a.557.557,0,0,1-.77-.8l5.86-5.61a1.116,1.116,0,0,0,0-1.634,1.3,1.3,0,0,0-1.778,0L4.339,11.469a2.622,2.622,0,0,0,0,3.829,2.975,2.975,0,0,0,4.071,0l5.9-5.65a4.127,4.127,0,0,0,0-6.024,4.649,4.649,0,0,0-6.364,0L3.192,8.176a.557.557,0,0,1-.77-.8Z"
                          transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                      </svg>

                    </div>
                  </ng-container>

                  <ng-container *ngIf="tab.icon === 'document'" aria-label="application and activity details tab">
                    <div class="border p-2 rounded-full border-gray-600"
                      [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 15.235 15.979">
                        <path id="document-add-svgrepo-com_1_" data-name="document-add-svgrepo-com (1)"
                          d="M8.711,1.25h1.57a27.146,27.146,0,0,1,3.294.114,3.5,3.5,0,0,1,2.133.92.557.557,0,0,1-.788.788,2.413,2.413,0,0,0-1.493-.6,26.75,26.75,0,0,0-3.188-.1H8.753a26.749,26.749,0,0,0-3.188.1,2.413,2.413,0,0,0-1.493.6,2.413,2.413,0,0,0-.6,1.493,26.749,26.749,0,0,0-.1,3.188v2.973a26.75,26.75,0,0,0,.1,3.188,2.413,2.413,0,0,0,.6,1.493,2.413,2.413,0,0,0,1.493.6,26.743,26.743,0,0,0,3.188.1h1.486a26.744,26.744,0,0,0,3.188-.1,2.413,2.413,0,0,0,1.493-.6c.517-.517.674-1.321.7-3.2a.557.557,0,1,1,1.115.016c-.026,1.8-.143,3.09-1.027,3.975a3.5,3.5,0,0,1-2.133.92,27.161,27.161,0,0,1-3.294.114H8.711a27.161,27.161,0,0,1-3.294-.114,3.5,3.5,0,0,1-2.133-.92,3.5,3.5,0,0,1-.92-2.133,27.146,27.146,0,0,1-.114-3.294V7.711a27.146,27.146,0,0,1,.114-3.294,3.5,3.5,0,0,1,.92-2.133,3.5,3.5,0,0,1,2.133-.92A27.146,27.146,0,0,1,8.711,1.25Zm5.328,4.307a2.019,2.019,0,0,1,2.855,2.855L13.36,11.946a5.221,5.221,0,0,1-.468.436,3,3,0,0,1-.553.342,5.235,5.235,0,0,1-.6.224l-1.549.516a.951.951,0,0,1-1.2-1.2l.506-1.517.01-.031a5.253,5.253,0,0,1,.224-.6,3,3,0,0,1,.342-.553,5.221,5.221,0,0,1,.436-.468l.023-.023Zm2.067.788a.9.9,0,0,0-1.278,0l-.135.135c.007.025.016.051.025.079a1.928,1.928,0,0,0,1.174,1.174l.079.025.135-.135A.9.9,0,0,0,16.106,6.345ZM15.119,8.61a3.062,3.062,0,0,1-1.278-1.278L11.317,9.856a4.671,4.671,0,0,0-.369.389,1.882,1.882,0,0,0-.214.347,4.65,4.65,0,0,0-.183.5l-.3.892.21.21.892-.3a4.65,4.65,0,0,0,.5-.183,1.882,1.882,0,0,0,.347-.214,4.671,4.671,0,0,0,.389-.369ZM5.966,7.01a.557.557,0,0,1,.557-.557h4.831a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,7.01Zm0,2.973a.557.557,0,0,1,.557-.557H8.381a.557.557,0,1,1,0,1.115H6.523A.557.557,0,0,1,5.966,9.982Zm0,2.973a.557.557,0,0,1,.557-.557H7.638a.557.557,0,0,1,0,1.115H6.523A.557.557,0,0,1,5.966,12.955Z"
                          transform="translate(-2.25 -1.25)" fill-rule="evenodd" />
                      </svg>

                    </div>

                  </ng-container>

                  <!--  <img *ngIf="tab.icon === 'building'" src="/assets/images/Web/Group%2056438.svg"
                          alt="بيانات الشركة والعمل" class="w-8 h-8"> -->
                  <ng-container *ngIf="tab.icon === 'building'" aria-label="manager and applicant details tab">
                    <div class="border rounded-full border-gray-600 p-2"
                      [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.872 11.291">
                        <g id="user-id-svgrepo-com" transform="translate(-1.25 -3.25)">
                          <path id="Path_82734" data-name="Path 82734"
                            d="M8.024,6.25A1.774,1.774,0,1,0,9.8,8.024,1.774,1.774,0,0,0,8.024,6.25ZM7.218,8.024a.806.806,0,1,1,.806.806A.806.806,0,0,1,7.218,8.024Z"
                            transform="translate(-1.774 -1.064)" fill="#707070" fill-rule="evenodd" />
                          <path id="Path_82735" data-name="Path 82735"
                            d="M7.315,12.25a4.662,4.662,0,0,0-2.041.429A1.6,1.6,0,0,0,4.25,14.024v.04a1.4,1.4,0,0,0,.523,1.264,2.334,2.334,0,0,0,.964.361,9.15,9.15,0,0,0,1.578.109,9.15,9.15,0,0,0,1.578-.109,2.334,2.334,0,0,0,.964-.361,1.4,1.4,0,0,0,.523-1.264v-.04a1.6,1.6,0,0,0-1.023-1.345A4.662,4.662,0,0,0,7.315,12.25Zm-2.1,1.774c0-.074.073-.272.488-.48a3.709,3.709,0,0,1,1.608-.327,3.709,3.709,0,0,1,1.608.327c.416.208.488.405.488.48,0,.39-.025.45-.122.52a1.423,1.423,0,0,1-.568.192,8.234,8.234,0,0,1-1.406.094,8.234,8.234,0,0,1-1.406-.094,1.424,1.424,0,0,1-.568-.192C5.243,14.474,5.218,14.414,5.218,14.024Z"
                            transform="translate(-1.064 -3.193)" fill="#707070" fill-rule="evenodd" />
                          <path id="Path_82736" data-name="Path 82736"
                            d="M17.315,12.218a.484.484,0,1,0,0-.968H14.734a.484.484,0,0,0,0,.968Z"
                            transform="translate(-4.613 -2.838)" fill="#707070" />
                          <path id="Path_82737" data-name="Path 82737"
                            d="M17.444,8.734a.484.484,0,0,1-.484.484H13.734a.484.484,0,0,1,0-.968H16.96A.484.484,0,0,1,17.444,8.734Z"
                            transform="translate(-4.258 -1.774)" fill="#707070" />
                          <path id="Path_82738" data-name="Path 82738"
                            d="M17.669,15.218a.484.484,0,1,0,0-.968H15.734a.484.484,0,0,0,0,.968Z"
                            transform="translate(-4.967 -3.903)" fill="#707070" />
                          <path id="Path_82739" data-name="Path 82739"
                            d="M6.859,3.25H9.513a23.566,23.566,0,0,1,2.86.1,3.039,3.039,0,0,1,1.852.8A3.04,3.04,0,0,1,15.023,6a23.579,23.579,0,0,1,.1,2.86v.073a23.579,23.579,0,0,1-.1,2.86,3.04,3.04,0,0,1-.8,1.852,3.04,3.04,0,0,1-1.852.8,23.579,23.579,0,0,1-2.86.1H6.859a23.58,23.58,0,0,1-2.86-.1,3.04,3.04,0,0,1-1.852-.8,3.039,3.039,0,0,1-.8-1.852,23.566,23.566,0,0,1-.1-2.86V8.859A23.567,23.567,0,0,1,1.349,6a3.039,3.039,0,0,1,.8-1.852A3.039,3.039,0,0,1,4,3.349,23.567,23.567,0,0,1,6.859,3.25ZM4.128,4.308a2.1,2.1,0,0,0-1.3.524,2.1,2.1,0,0,0-.524,1.3A23.222,23.222,0,0,0,2.218,8.9a23.223,23.223,0,0,0,.09,2.767,2.1,2.1,0,0,0,.524,1.3,2.1,2.1,0,0,0,1.3.524,23.217,23.217,0,0,0,2.767.09H9.476a23.218,23.218,0,0,0,2.767-.09,2.1,2.1,0,0,0,1.3-.524,2.1,2.1,0,0,0,.524-1.3,23.218,23.218,0,0,0,.09-2.767,23.217,23.217,0,0,0-.09-2.767,2.1,2.1,0,0,0-.524-1.3,2.1,2.1,0,0,0-1.3-.524,23.223,23.223,0,0,0-2.767-.09H6.9A23.222,23.222,0,0,0,4.128,4.308Z"
                            fill-rule="evenodd" />
                        </g>
                      </svg>

                    </div>
                  </ng-container>

                  <!-- <img *ngIf="tab.icon === 'money'" src="/assets/images/Web/Group%2056441.svg"
                          alt="مستندات الدعم المالي" class="w-8 h-8"> -->
                  <ng-container *ngIf="tab.icon === 'money'" aria-label="headquarters and company details tab">
                    <div class="border rounded-full border-gray-600 p-2"
                      [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">

                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.494 12.494">
                        <path id="buildings-2-svgrepo-com"
                          d="M6.886,1.25H8.108a10.649,10.649,0,0,1,1.3.046,1.583,1.583,0,0,1,.959.422,1.583,1.583,0,0,1,.422.959,10.648,10.648,0,0,1,.046,1.3v.757c.335,0,.619,0,.854.027a1.616,1.616,0,0,1,.761.243,1.6,1.6,0,0,1,.441.441,1.616,1.616,0,0,1,.243.761c.027.263.027.588.027.977v5.688h.145a.436.436,0,0,1,0,.872H1.686a.436.436,0,1,1,0-.872h.145V7.184c0-.389,0-.714.027-.977A1.616,1.616,0,0,1,2.1,5.447a1.6,1.6,0,0,1,.441-.441A1.616,1.616,0,0,1,3.3,4.763c.235-.024.519-.026.854-.027V3.98a10.649,10.649,0,0,1,.046-1.3,1.583,1.583,0,0,1,.422-.959A1.583,1.583,0,0,1,5.583,1.3,10.648,10.648,0,0,1,6.886,1.25ZM4.156,5.608c-.339,0-.578,0-.765.022a.773.773,0,0,0-.365.1.726.726,0,0,0-.2.2.773.773,0,0,0-.1.365c-.022.213-.022.494-.022.911v5.666H4.156Zm.872,7.264H7.061V11.565a.436.436,0,0,1,.872,0v1.308H9.967V4.01a10.315,10.315,0,0,0-.039-1.217.735.735,0,0,0-.174-.459A.735.735,0,0,0,9.3,2.16a10.308,10.308,0,0,0-1.217-.039H6.916A10.308,10.308,0,0,0,5.7,2.16a.735.735,0,0,0-.459.174.735.735,0,0,0-.174.459A10.307,10.307,0,0,0,5.027,4.01Zm5.811,0h1.453V7.207c0-.417,0-.7-.022-.911a.773.773,0,0,0-.1-.365.727.727,0,0,0-.2-.2.773.773,0,0,0-.365-.1c-.188-.019-.427-.022-.765-.022ZM5.9,3.429a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,3.429Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,5.173Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,6.916Zm0,1.743a.436.436,0,0,1,.436-.436H8.659a.436.436,0,1,1,0,.872H6.335A.436.436,0,0,1,5.9,8.659Z"
                          transform="translate(-1.25 -1.25)" fill-rule="evenodd" />
                      </svg>

                    </div>
                  </ng-container>

                  <!-- <img *ngIf="tab.icon === 'chart'" src="/assets/images/Web/Group%2056438.svg"
                          alt="مستندات الدعم التجاري" class="w-8 h-8"> -->
                  <ng-container *ngIf="tab.icon === 'chart'" aria-label="bussiness name description tab">
                    <div class="border rounded-full p-2 border-gray-600"
                      [ngClass]="{'border-primary fill-primary' : tab.isCompleted, 'border-[#60583d] fill-[#60583d]': tab.isActive}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 13.291 12.664">
                        <path id="garage-svgrepo-com"
                          d="M8.819,3.543a1.391,1.391,0,0,0-1.848,0l-3.709,3.3A1.391,1.391,0,0,0,2.8,7.879V14h.927V10.723a11.326,11.326,0,0,1,.049-1.386,1.684,1.684,0,0,1,.449-1.02,1.684,1.684,0,0,1,1.02-.448,11.325,11.325,0,0,1,1.386-.049H9.164a11.325,11.325,0,0,1,1.386.049,1.536,1.536,0,0,1,1.469,1.469,11.327,11.327,0,0,1,.049,1.386V14H13V7.879a1.391,1.391,0,0,0-.467-1.04ZM13.923,14V7.879a2.318,2.318,0,0,0-.778-1.733l-3.709-3.3a2.318,2.318,0,0,0-3.08,0l-3.709,3.3a2.318,2.318,0,0,0-.778,1.733V14H1.714a.464.464,0,1,0,0,.927H14.077a.464.464,0,0,0,0-.927Zm-2.782,0V10.755A10.973,10.973,0,0,0,11.1,9.46a.636.636,0,0,0-.673-.673,10.958,10.958,0,0,0-1.295-.041H6.659a10.959,10.959,0,0,0-1.295.041.782.782,0,0,0-.488.185.782.782,0,0,0-.185.488,10.965,10.965,0,0,0-.041,1.295V14ZM6.2,6.428a.464.464,0,0,1,.464-.464H9.132a.464.464,0,0,1,0,.927H6.659A.464.464,0,0,1,6.2,6.428Zm-.618,4.018a.464.464,0,0,1,.464-.464H9.75a.464.464,0,0,1,0,.927H6.041A.464.464,0,0,1,5.577,10.446Zm0,1.855a.464.464,0,0,1,.464-.464H9.75a.464.464,0,1,1,0,.927H6.041A.464.464,0,0,1,5.577,12.3Z"
                          transform="translate(-1.25 -2.264)" fill-rule="evenodd" />
                      </svg>

                    </div>
                  </ng-container>

                  <!-- <img *ngIf="tab.icon === 'certificate'" src="/assets/images/Web/Group%2056442.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> -->
                  <ng-container *ngIf="tab.icon === 'certificate'" aria-label="terms and conditions">
                    <div class="border p-2 rounded-full border-gray-600"
                      [ngClass]="{'!border-primary' : tab.isCompleted, '!border-[#60583d] fill-[#60583d]': tab.isActive}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12.042 13.277">
                        <g id="Group_57076" data-name="Group 57076" transform="translate(3485 22672)">
                          <path id="document-medicine-svgrepo-com"
                            d="M7.619,1.25h1.3a22.557,22.557,0,0,1,2.737.095,2.909,2.909,0,0,1,1.772.765A2.91,2.91,0,0,1,14.2,3.881a22.569,22.569,0,0,1,.095,2.737v2.54A22.569,22.569,0,0,1,14.2,11.9a2.91,2.91,0,0,1-.765,1.772,2.91,2.91,0,0,1-1.772.765,22.569,22.569,0,0,1-2.737.095h-1.3a22.57,22.57,0,0,1-2.737-.095,2.91,2.91,0,0,1-1.772-.765A2.909,2.909,0,0,1,2.345,11.9,22.557,22.557,0,0,1,2.25,9.159V6.619a22.557,22.557,0,0,1,.095-2.737,2.909,2.909,0,0,1,.765-1.772,2.909,2.909,0,0,1,1.772-.765A22.557,22.557,0,0,1,7.619,1.25ZM5,2.263a2.005,2.005,0,0,0-1.241.5A2.005,2.005,0,0,0,3.263,4a22.227,22.227,0,0,0-.086,2.649v2.47a22.228,22.228,0,0,0,.086,2.649,2.005,2.005,0,0,0,.5,1.241,2.005,2.005,0,0,0,1.241.5,22.222,22.222,0,0,0,2.649.086H8.889a22.223,22.223,0,0,0,2.649-.086,2.005,2.005,0,0,0,1.241-.5,2.005,2.005,0,0,0,.5-1.241,22.223,22.223,0,0,0,.086-2.649V6.654A22.222,22.222,0,0,0,13.28,4a2.005,2.005,0,0,0-.5-1.241,2.005,2.005,0,0,0-1.241-.5,22.228,22.228,0,0,0-2.649-.086H7.654A22.227,22.227,0,0,0,5,2.263Zm.333,6.861A.463.463,0,0,1,5.8,8.661h4.94a.463.463,0,0,1,0,.926H5.8A.463.463,0,0,1,5.338,9.124Zm.618,2.47a.463.463,0,0,1,.463-.463h3.705a.463.463,0,0,1,0,.926H6.418A.463.463,0,0,1,5.955,11.594Z"
                            transform="translate(-3487.25 -22673.25)" fill="#707070" fill-rule="evenodd" />
                          <path id="Path_82744" data-name="Path 82744"
                            d="M8.491,14.367a.463.463,0,0,1,.038.654L6.883,16.874a.463.463,0,0,1-.692,0l-.823-.926a.463.463,0,1,1,.692-.615l.477.537,1.3-1.463A.463.463,0,0,1,8.491,14.367Z"
                            transform="translate(-3485.927 -22683.162)" fill-rule="evenodd" />
                        </g>
                      </svg>

                    </div>

                  </ng-container>
                  <!-- <img *ngIf="tab.icon === 'certificates'" src="/assets/images/Web/Group%2057224.svg"
                          alt="الشهادة والإقرار" class="w-8 h-8"> -->
                  <ng-container *ngIf="tab.icon === 'certificates'" aria-label="remarks">
                    <svg class="scale-[1.5]" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                      viewBox="0 0 28 28">
                      <g id="Group_57224" data-name="Group 57224" transform="translate(-1775 -855)">
                        <g id="Group_56441" data-name="Group 56441" transform="translate(-18 389)">
                          <g id="Ellipse_28" data-name="Ellipse 28" transform="translate(1793 466)" fill="none"
                            stroke="#9f956c" stroke-width="1">
                            <circle cx="14" cy="14" r="14" stroke="none" />
                            <circle cx="14" cy="14" r="13.5" fill="none" />
                          </g>
                        </g>
                        <g id="shield-check-svgrepo-com_1_" data-name="shield-check-svgrepo-com (1)"
                          transform="translate(1780.75 860.75)">
                          <path id="Path_82778" data-name="Path 82778"
                            d="M12.95,10.082a.5.5,0,0,0-.745-.665l-2,2.245-.578-.648a.5.5,0,1,0-.745.665l.951,1.065a.5.5,0,0,0,.745,0Z"
                            transform="translate(-2.174 -2.675)" fill="#9f946d" />
                          <path id="Path_82779" data-name="Path 82779"
                            d="M8.74,1.25a6.928,6.928,0,0,0-2.181.533l-.484.166c-.986.338-1.747.6-2.292.819a5.692,5.692,0,0,0-.7.33,1.516,1.516,0,0,0-.491.416,1.55,1.55,0,0,0-.227.6,5.893,5.893,0,0,0-.083.772c-.032.59-.032,1.4-.032,2.448V8.4a7.433,7.433,0,0,0,4.891,6.8l.018.008a4.4,4.4,0,0,0,.683.254,3.52,3.52,0,0,0,.9.094,3.52,3.52,0,0,0,.9-.094,4.4,4.4,0,0,0,.683-.254l.018-.008a7.432,7.432,0,0,0,4.891-6.8V7.334c0-1.049,0-1.858-.032-2.448a5.891,5.891,0,0,0-.083-.772,1.55,1.55,0,0,0-.227-.6A1.516,1.516,0,0,0,14.4,3.1a5.694,5.694,0,0,0-.7-.33c-.545-.221-1.306-.482-2.292-.819l-.484-.166A6.928,6.928,0,0,0,8.74,1.25ZM6.8,2.757A6.469,6.469,0,0,1,8.74,2.248a6.469,6.469,0,0,1,1.943.509l.381.131c1.007.345,1.741.6,2.257.806a4.749,4.749,0,0,1,.575.268,1.092,1.092,0,0,1,.139.093.256.256,0,0,1,.036.034.271.271,0,0,1,.021.049,1.157,1.157,0,0,1,.042.165,4.94,4.94,0,0,1,.066.638c.03.56.031,1.341.031,2.412V8.4a6.439,6.439,0,0,1-4.292,5.89,3.606,3.606,0,0,1-.549.21,2.546,2.546,0,0,1-.65.063,2.546,2.546,0,0,1-.65-.063,3.606,3.606,0,0,1-.549-.21A6.439,6.439,0,0,1,3.248,8.4V7.351c0-1.071,0-1.852.031-2.412A4.951,4.951,0,0,1,3.345,4.3a1.156,1.156,0,0,1,.042-.165.272.272,0,0,1,.021-.049.257.257,0,0,1,.036-.034,1.1,1.1,0,0,1,.139-.093,4.75,4.75,0,0,1,.575-.268c.516-.209,1.25-.461,2.257-.806Z"
                            fill-rule="evenodd" />
                        </g>
                      </g>
                    </svg>
                  </ng-container>

                </div>

                <div [class]="sidebarCollapsed ? 'hidden hidden-show' : 'flex-1'">
                  <span class="tab-title-custom">{{ tab.title }}</span>
                </div>
              </div>

              <div *ngIf="tab.isCompleted && !sidebarCollapsed" class="completion-icon mx-2">
                <img src="/assets/images/checked-ok-mark-accept-check-approved-svgrepo-com.svg" alt="approved icon">
              </div>
            </div>

            <!-- <div *ngIf="sidebarCollapsed" class="tab-tooltip">
              {{ tab.title }}
            </div> -->
          </button>
          @if (!sidebarCollapsed) {
          <div [@slideDownUp]="!activeDropdown.includes(tab.tabID.toString())" class="accordion-content">
            <ul class="sub-menu text-gray-500">
              <ng-container *ngFor="let child of tab.tabSections | sortByOrder: 'SectionOrder'">
                <li>
                  <a [href]="'#'+ child.SectionID"
                    (click)="!tab.isAccessible ? '' : changeTab(visibleTabs()!.indexOf(tab) + 1,  child.SectionID, $event)"
                    aria-label="attachments section"
                    class="items-center p-3 duration-200 text-lg pb-4 flex gap-2 tab-item-custom"
                    [class.border-none]="sidebarCollapsed" [title]="sidebarCollapsed? tab.TitleEn : ''" [ngClass]="{
                    'active !text-[#60583d]': activeSection == child.SectionID && tab.isActive,
                    '!text-primary': activeSection == child.SectionID && tab.isCompleted
                  }" [class]="sidebarCollapsed ? 'mx-auto !p-2 !my-0 w-full' : ''">
                    @if(activeSection == child.SectionID){
                    @if (store.index.locale == 'en') {
                    <icon-location-arrow-right class="w-4 text-primary"></icon-location-arrow-right>
                    }@else{
                    <icon-location-arrow-left class="w-4 text-primary"></icon-location-arrow-left>
                    }

                    }@else{
                    -
                    }
                    {{ store.index.locale == 'en' ? child.TitleEn : child.TitleAr }}
                  </a>
                </li>
              </ng-container>
            </ul>
          </div>
          }
          <!-- <div class="connector-line absolute ltr:left-6 rtl:right-6 z-10" [class.completed-line]="tab.isCompleted"
          [class.active-line]="tab.isActive" *ngIf="i < visibleTabs()!.length - 1"></div> -->
          <!-- [ngClass]="{'ltr:!left-1/2 rtl:!right-1/2': isMobileScreen || sidebarCollapsed}" -->
        </div>
        }
      </ul>
    </nav>


  </aside>
  }

  <ng-template #tabsContent let-tabsList="tabs">
    <!-- Main Content -->
    <div class="flex-1 w-full min-w-0 relative">
      <div class="main-content !mr-0">

        @if(navigationTabs()){
        <div *ngIf="navigationTabs()!.length > 0 && wizardForm" class="p-3 md:p-4 bg-white rounded-lg">


          <form [formGroup]="wizardForm" class="mt-4 md:mt-8 space-y-4 md:space-y-6">
            @if (editApp()) {
            @if(btnRelatedServices()){
            <app-service-select-modal [services]="btnRelatedServices()" [title]="clickedActionTitle()"
              [confirmBtnName]="translations()?.validationMsgBtn.label"
              [isOpened]="serviceSelectModalFlag()"></app-service-select-modal>
            }
            <!-- 'top-[155px]': phaseIDs() && phaseIDs()!.length > 0,
                    'top-[155px]': phaseIDs() && phaseIDs()!.length === 0 -->
            <div
              class="flex flex-wrap gap-2 mb-8 bg-gray-100 border border-gray-200 rounded px-1 py-3 font-bold sticky top-[155px] z-[99]"
              [ngClass]="{
                    'shadow-lg': shouldApplyShadow, 
                    'shadow-none': !shouldApplyShadow
                  }" *ngIf="actions && actions.length > 0">
              <ng-container *ngFor="let action of displayActions() | sortByOrder: 'ActionSortOrder'">
                @if(!action.isDropdown){
                <button [disabled]="apiLoading" [ngClass]="{
                                      '': action.TitleEN === 'Send Request',
                                      '!bg-opacity-80 cursor-not-allowed': apiLoading || calcApiLoading
                          }"
                  class="py-2 px-4 font-semibold bg-white border border-gray-200 hover:text-primary hover:underline rounded-md flex gap-1 items-center"
                  (click)="handleAction(action)">
                  @if(action.ActionID === 865 || action.ActionID === 1841 || action.ActionID === 1881 || action.ActionID
                  === 1867){
                  <img src="/assets/images/icons/clipboard-remove-svgrepo-com.svg" alt="remove icon" class="h-4">
                  }@else if (action.ActionID === 1989 || action.ActionID === 1990 || action.ActionID === 1991 ||
                  action.ActionID === 1723 || action.ActionID === 1992 || action.ActionID === 1848 || action.ActionID
                  ===
                  1900 || action.ActionID === 1880 || action.ActionID === 863 || action.ActionID === 1998){
                  <img src="/assets/images/icons/revoke57187.svg" alt="cancel icon" class="h-4">
                  }@else if(action.ActionID === 861 || action.ActionID === 1845 || action.ActionID === 1884){
                  <img src="/assets/images/icons/edit-svgrepo-com.svg" alt="edit icon" class="h-4">
                  }@else if (action.ActionID === 862) {
                  <img src="/assets/images/icons/send-svgrepo-com.svg" alt="send icon" class="h-4">
                  }@else if (action.ActionID === 1724) {
                  <img src="/assets/images/icons/copy-com.svg" alt="copy icon" class="h-4">
                  }@else if(action.ActionID === 1850 || action.ActionID === 1844 || action.ActionID === 1993 ||
                  action.ActionID === 1996 || action.ActionID === 1869 || action.ActionID === 1879 || action.ActionID
                  ===
                  1872){
                  <img src="/assets/images/icons/Group 57145.svg" alt="renew icon" class="h-4" />
                  }@else if (action.ActionID === 1832 || action.ActionID === 1851){
                  <img src="/assets/images/icons/credit-card-payment-svgrepo-com.svg" alt="pay icon" class="h-4" />
                  }@else if (action.ActionID === 864){
                  <icon-circle-check class="text-green-600 h-5"></icon-circle-check>
                  }@else if ( action.ActionID === 1995){
                  <img src="/assets/images/icons/add-icon.svg" alt="add icon" class="h-4">
                  }@else if(action.ActionID === 1871){
                  <img src="/assets/images/icons/property-transfer.svg" alt="property transfer icon" class="h-4">
                  }@else if (action.ActionID === 1985 || action.ActionID === 1984) {
                  <img src="/assets/images/icons/Star.svg" class="h-4" alt="star icon for rating">
                  }@else if (action.ActionID === 1842 || action.ActionID === 1843 || action.ActionID === 1993 ||
                  action.ActionID === 1852 || action.ActionID === 1901) {
                  <img src="/assets/images/icons/printer57135.svg" alt="print icon">
                  }@else if(action.ActionID === 1856) {
                  <icon-pencil class="text-primary h-4"></icon-pencil>
                  }@else if(action.ActionID === 1855) {
                  <icon-txt-file class="text-primary h-5"></icon-txt-file>
                  }@else if (action.ActionID === 1859 || action.ActionID === 1865) {
                  <icon-history-clock class="h-5 text-primary"></icon-history-clock>
                  }@else if (action.ActionID === 1877) {
                  <icon-transfer-circle-horizontal class="h-5 text-primary"></icon-transfer-circle-horizontal>
                  }

                  @if(store.index.locale == 'en'){
                  {{ action.TitleEN }}
                  }@else {
                  {{ action.TitleAR }}
                  }
                </button>
                }@else {
                @if(action.groupID){
                <div hlMenu class="!block relative">
                  <button
                    class="py-2 px-4 font-semibold bg-white border border-gray-200 hover:text-primary hover:underline rounded-md flex gap-1 items-center"
                    [ngClass]="{' bg-gray-200':  openMenus[action.groupID],
                        '!bg-opacity-80 cursor-not-allowed': apiLoading
                            }" type="button" (click)="toggleMenu(action.groupID)" hlMenuButton>

                    @if(action.actions[0].ActionID === 865 || action.actions[0].ActionID === 1841 ||
                    action.actions[0].ActionID === 1881 ||
                    action.actions[0].ActionID === 1867){
                    <img src="/assets/images/icons/clipboard-remove-svgrepo-com.svg" alt="remove icon" class="h-4">
                    }@else if (action.actions[0].ActionID === 1989 || action.actions[0].ActionID === 1990 ||
                    action.actions[0].ActionID === 1991 ||
                    action.actions[0].ActionID === 1723 || action.actions[0].ActionID === 1992 ||
                    action.actions[0].ActionID === 1848 || action.actions[0].ActionID === 1900 ||
                    action.actions[0].ActionID === 1880 || action.actions[0].ActionID === 863 ||
                    action.actions[0].ActionID === 1998){
                    <img src="/assets/images/icons/revoke57187.svg" alt="cancel icon" class="h-4">
                    }@else if(action.actions[0].ActionID === 861 || action.actions[0].ActionID === 1845 ||
                    action.actions[0].ActionID === 1884){
                    <img src="/assets/images/icons/edit-svgrepo-com.svg" alt="edit icon" class="h-4">
                    }@else if (action.actions[0].ActionID === 862) {
                    <img src="/assets/images/icons/send-svgrepo-com.svg" alt="send icon" class="h-4">
                    }@else if (action.actions[0].ActionID === 1724) {
                    <img src="/assets/images/icons/copy-com.svg" alt="copy icon" class="h-4">
                    }@else if(action.actions[0].ActionID === 1850 || action.actions[0].ActionID === 1844 ||
                    action.actions[0].ActionID === 1993 || action.actions[0].ActionID === 1996 ||
                    action.actions[0].ActionID === 1869 || action.actions[0].ActionID === 1879 ||
                    action.actions[0].ActionID === 1872){
                    <img src="/assets/images/icons/Group 57145.svg" alt="renew icon" class="h-4" />
                    }@else if (action.actions[0].ActionID === 1832){
                    <img src="/assets/images/icons/credit-card-payment-svgrepo-com.svg" alt="pay icon" class="h-4" />
                    }@else if (action.actions[0].ActionID === 864){
                    <icon-circle-check class="text-green-600 h-5"></icon-circle-check>
                    }@else if ( action.actions[0].ActionID === 1995){
                    <img src="/assets/images/icons/add-icon.svg" alt="add icon" class="h-4">
                    }@else if(action.actions[0].ActionID === 1871){
                    <img src="/assets/images/icons/property-transfer.svg" alt="property transfer icon" class="h-4">
                    }@else if (action.actions[0].ActionID === 1985) {
                    <img src="/assets/images/icons/Star.svg" class="h-4" alt="star icon for rating">
                    }@else if (action.actions[0].ActionID === 1842 || action.actions[0].ActionID === 1843 ||
                    action.actions[0].ActionID === 1993 || action.actions[0].ActionID === 1852 ||
                    action.actions[0].ActionID === 1901) {
                    <img src="/assets/images/icons/printer57135.svg" alt="print icon">
                    }@else if (action.actions[0].ActionID === 1859 || action.actions[0].ActionID === 1865) {
                    <icon-history-clock class="h-5 text-primary"></icon-history-clock>
                    }@else if (action.actions[0].ActionID === 1997) {
                    <icon-transfer-circle-horizontal class="h-5 text-primary"></icon-transfer-circle-horizontal>
                    }

                    @if(store.index.locale == 'en'){
                    {{ action.groupTitleEN }}
                    }@else {
                    {{ action.groupTitleAR }}
                    }
                    <span [@reverseChevron]="(!!openMenus[action.groupID]).toString()">
                      <icon-chevron-down class="w-4 h-4"
                        [ngClass]="{'text-primary': !!openMenus[action.groupID]}"></icon-chevron-down>
                    </span>
                  </button>
                  <ul *hlMenuItems @toggleAnimation
                    class="top-11 absolute w-[250px] sm:w-[280px] !py-0 font-semibold shadow-lg shadow-primary bg-white text-dark ltr:right-0 rtl:right-0 z-[9999] border border-gray-200 rounded-md focus:!outline-none">
                    @for (item of action.actions; track item.ActionID) {
                    <button [disabled]="apiLoading"
                      class="block w-full text-gray-600 hover:text-primary px-3 py-2 rounded-md xl:text-base ltr:text-left rtl:text-right"
                      (click)="handleAction(item);" *hlMenuItem="let menuItem">
                      {{store.index.locale === 'en'? item.TitleEN: item.TitleAR}}
                    </button>
                    }
                  </ul>
                </div>
                }@else{
                <div hlMenu class="!block relative">
                  <button
                    class="py-2 px-4 font-semibold bg-white border border-gray-200 hover:text-primary hover:underline rounded-md flex gap-1 items-center"
                    [ngClass]="{' bg-gray-200':  openMenus[action.ActionID],
                        '!bg-opacity-80 cursor-not-allowed': apiLoading
                            }" type="button" (click)="toggleMenu(action.ActionID)" hlMenuButton>

                    @if(action.ActionID === 865 || action.ActionID === 1841 || action.ActionID === 1881
                    || action.ActionID === 1867){
                    <img src="/assets/images/icons/clipboard-remove-svgrepo-com.svg" alt="remove icon" class="h-4">
                    }@else if (action.ActionID === 1989 || action.ActionID === 1990 || action.ActionID === 1991 ||
                    action.ActionID === 1723 || action.ActionID === 1992 || action.ActionID === 1848 || action.ActionID
                    === 1900 || action.ActionID === 1880 || action.ActionID === 863 || action.ActionID === 1998){
                    <img src="/assets/images/icons/revoke57187.svg" alt="cancel icon" class="h-4">
                    }@else if(action.ActionID === 861 || action.ActionID === 1845 || action.ActionID === 1884){
                    <img src="/assets/images/icons/edit-svgrepo-com.svg" alt="edit icon" class="h-4">
                    }@else if (action.ActionID === 862) {
                    <img src="/assets/images/icons/send-svgrepo-com.svg" alt="send icon" class="h-4">
                    }@else if (action.ActionID === 1724) {
                    <img src="/assets/images/icons/copy-com.svg" alt="copy icon" class="h-4">
                    }@else if(action.ActionID === 1850 || action.ActionID === 1844 || action.ActionID === 1993 ||
                    action.ActionID === 1996 || action.ActionID === 1869 || action.ActionID === 1879 || action.ActionID
                    === 1872){
                    <img src="/assets/images/icons/Group 57145.svg" alt="renew icon" class="h-4" />
                    }@else if (action.ActionID === 1832){
                    <img src="/assets/images/icons/credit-card-payment-svgrepo-com.svg" alt="pay icon" class="h-4" />
                    }@else if (action.ActionID === 864){
                    <icon-circle-check class="text-green-600 h-5"></icon-circle-check>
                    }@else if ( action.ActionID === 1995){
                    <img src="/assets/images/icons/add-icon.svg" alt="add icon" class="h-4">
                    }@else if(action.ActionID === 1871){
                    <img src="/assets/images/icons/property-transfer.svg" alt="property transfer icon" class="h-4">
                    }@else if (action.ActionID === 1985 || action.ActionID === 1984) {
                    <img src="/assets/images/icons/Star.svg" class="h-4" alt="star icon for rating">
                    }@else if (action.ActionID === 1842 || action.ActionID === 1843 || action.ActionID === 1993 ||
                    action.ActionID === 1852 || action.ActionID === 1901) {
                    <img src="/assets/images/icons/printer57135.svg" alt="print icon">
                    }@else if (action.ActionID === 1859 || action.ActionID === 1865) {
                    <icon-history-clock class="h-5 text-primary"></icon-history-clock>
                    }@else if (action.ActionID === 1877) {
                    <icon-transfer-circle-horizontal class="h-5 text-primary"></icon-transfer-circle-horizontal>
                    }

                    @if(store.index.locale == 'en'){
                    {{ action.TitleEN }}
                    }@else {
                    {{ action.TitleAR }}
                    }
                    <span [@reverseChevron]="(!!openMenus[action.ActionID]).toString()">
                      <icon-chevron-down class="w-4 h-4"
                        [ngClass]="{'text-primary': !!openMenus[action.ActionID]}"></icon-chevron-down>
                    </span>
                  </button>
                  <ul *hlMenuItems @toggleAnimation
                    class="top-11 absolute w-[250px] sm:w-[280px] !py-0 font-semibold shadow-lg shadow-primary bg-white text-dark ltr:right-0 rtl:right-0 z-[9999] border border-gray-200 rounded-md focus:!outline-none">
                    @for (item of filteredProcessList(action); track item.LookupID) {
                    @if(!item.HasServiceID){
                    <li *hlMenuItem="let menuItem">
                      <button [disabled]="apiLoading"
                        class="block w-full text-gray-600 hover:text-primary px-3 py-2 rounded-md xl:text-base ltr:text-left rtl:text-right"
                        (click)="setDefaultProcess(item.LookupID, undefined, action)">
                        {{store.index.locale === 'en'? item.TitleEn: item.TitleAr}}
                      </button>
                    </li>
                    }@else {
                    <li>
                      <div class="!block relative">
                        <button [disabled]="apiLoading" *hlMenuItem="let menuItem"
                          class="text-gray-600 hover:bg-gray-200 px-3 py-2 w-full ltr:text-left rtl:text-right flex items-center justify-between  border-transparent hover:border-primary xl:text-base"
                          [ngClass]="{'!border-primary bg-gray-200':  openMenus[item.TitleEn]}" type="button"
                          (click)="toggleMenu(item.TitleEn); setDefaultProcess(item.LookupID, item, action)">
                          {{store.index.locale === 'en'? item.TitleEn: item.TitleAr}}

                        </button>

                      </div>
                    </li>
                    }
                    }
                  </ul>
                </div>
                }
                }
              </ng-container>
            </div>
            <ng-container *ngFor="let currentTab of tabsList; let i = index">
              <div class="border border-gray-200 rounded p-4 relative" [ngClass]="{
                      '!border-0 !p-0':  calculateVisibilityActionID(currentTab)
                    }" #sectionEl>
                <h2
                  class="text-2xl min-[340px]:text-3xl font-bold text-gray-800 mb-4 break-words text-wrap flex justify-between flex-wrap"
                  *ngIf=" (currentTab.TabSections.length===1 &&
                        currentTab.TabSections[0].FieldsJson[0].VisibilityActionID> 0 &&
                        atLeastOneFormControlHasValue(currentTab.TabSections[0].FieldsJson)) ||
                        currentTab.TabSections[0].FieldsJson[0].VisibilityActionID === 0">

                  @if(store.index.locale == 'en'){
                  {{ currentTab.TitleEn }}
                  }@else {
                  {{ currentTab.TitleAr }}
                  }
                  @if (i== 0) {
                  <div class="space-y-4">
                    @if( ![7008, 7005, 5015].includes(apiBody.FKServiceID)){
                    <button (click)="openRequestAnalysis()"
                      class="text-nowrap btn btn-primary text-base flex items-center gap-1 hover:shadow-none">
                      <icon-stars class="w-5 h-5 self-start"></icon-stars>
                      {{ translations()?.requestAnalysisBtn.label }}
                    </button>
                    }
                    @if ( requestConfidence().average) {
                    <span class="text-sm flex gap-1 mt-1">
                      {{translations()?.completionMsg.label}}
                      <ai-completion-bar [percentage]="requestConfidence().average"></ai-completion-bar>
                    </span>
                    }

                  </div>
                  }
                </h2>
                <div *ngFor="let section of currentTab.TabSections; let i = index"
                  class="p-6 rounded-lg mb-6 border-b border-gray-400 rounded-b-none" [ngClass]="{ 'border-b-0 rounded-b-lg': i === currentTab.TabSections.length - 1,
                            '!p-0 !mb-0 !border-0':  calculateVisibilityActionID(currentTab)
                         }" [id]="section.SectionID">
                  @if (isSection[currentTab.NavigationTabID]) {
                  @if (section.FieldsJson[0].VisibilityActionID === 0) {
                  <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    @if(store.index.locale == 'en'){
                    {{ section.TitleEn }}
                    }@else {
                    {{ section.TitleAr }}
                    }
                  </h2>
                  <div class="flex flex-col gap-x-6 gap-y-4">
                    <ng-container *ngFor="let row of getGroupedFieldsForSection(section.SectionOrder)">
                      <div class="flex flex-wrap gap-6">
                        @if(row && row.length){
                        <app-dynamic-field *ngFor="let field of row" [field]="field" [form]="wizardForm"
                          (emitLoadingState)="onFileLoading($event)"
                          (isHidden)="onFieldHidden(field, $event, section.FKNavigationTabID)"
                          [actions]="displayActions()" (fieldChanged)="onFieldChanged($event)"
                          (uploadComplete)="uploadComplete($event)"
                          [ngClass]="{ 'w-full': field.FieldType === 2 || field.FieldType === 9 || field.FieldType === 8 ||
                                     checkScreenSizeForFields(), 'flex-1': field.FieldType !== 2, 'hidden': fieldVisibilityMap[field.InternalFieldName] || !field.FieldVisible }">
                        </app-dynamic-field>
                        }
                      </div>
                    </ng-container>
                  </div>
                  }@else if(section.FieldsJson[0].VisibilityActionID !== 0 &&
                  !atLeastOneFormControlHasValue(section.FieldsJson)) {

                  <app-application-confirm-modal [title]="store.index.locale === 'en'? section.TitleEn: section.TitleAr"
                    [confirmBtnName]="getConfirmButtonName(section)" [form]="wizardForm" [isOpened]="confirmModalFlag()"
                    [actionID]="section.FieldsJson[0].VisibilityActionID || null">

                    <div class="flex flex-col gap-x-6 gap-y-4">
                      <ng-container *ngFor="let row of getGroupedFieldsForSection(section.SectionOrder)">
                        <div class="flex flex-wrap gap-6">
                          <app-dynamic-field *ngFor="let field of row" [field]="field" [form]="wizardForm"
                            [actions]="displayActions()" (emitLoadingState)="onFileLoading($event)"
                            (fieldChanged)="onFieldChanged($event)" (uploadComplete)="uploadComplete($event)"
                            [ngClass]="{ 'w-full': field.FieldType === 2 || field.FieldType === 9 || field.FieldType === 8 ||
                                checkScreenSizeForFields(), 'flex-1': field.FieldType !== 2, 'hidden': fieldVisibilityMap[field.InternalFieldName] }">
                          </app-dynamic-field>
                        </div>
                      </ng-container>
                    </div>
                  </app-application-confirm-modal>

                  }@else if(section.FieldsJson[0].VisibilityActionID !== 0 &&
                  atLeastOneFormControlHasValue(section.FieldsJson)){
                  <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    @if(store.index.locale == 'en'){
                    {{ section.TitleEn }}
                    }@else {
                    {{ section.TitleAr }}
                    }
                  </h2>
                  <div class="flex flex-col gap-x-6 gap-y-4">
                    <ng-container *ngFor="let row of getGroupedFieldsForSection(section.SectionOrder)">
                      <div class="flex flex-wrap gap-6">
                        <app-dynamic-field *ngFor="let field of row" [field]="field" [form]="wizardForm"
                          [actions]="displayActions()" (emitLoadingState)="onFileLoading($event)"
                          (isHidden)="onFieldHidden(field, $event, section.FKNavigationTabID)"
                          (fieldChanged)="onFieldChanged($event)" (uploadComplete)="uploadComplete($event)"
                          [ngClass]="{ 'w-full': field.FieldType === 2 || field.FieldType === 9 || field.FieldType === 8 ||
                                checkScreenSizeForFields(), 'flex-1': field.FieldType !== 2, 'hidden': fieldVisibilityMap[field.InternalFieldName] }">
                        </app-dynamic-field>
                      </div>
                    </ng-container>
                  </div>
                  }
                  }
                </div>
              </div>
            </ng-container>
            <app-services-log-modal [isOpened]="allApplicationService.isLogData()"
              (closed)="onUserClose($event)"></app-services-log-modal>
            <app-related-applications-modal [isOpened]="allApplicationService.isRelatedRequestsData()"
              (closed)="onUserClose($event)"></app-related-applications-modal>
            <app-edited-data-modal [isOpened]="newApplicationService.isAuditData()"
              (closed)="onUserClose($event)"></app-edited-data-modal>
            <app-ai-analysis-modal [isOpened]="openAnalysisModel()" (closed)="onUserClose($event)"
              [fieldName]="'request'"></app-ai-analysis-modal>
            }@else {
            @if(currentTab()){
            <div class="w-full">
              <h2 class="text-2xl min-[340px]:text-3xl font-bold text-gray-800 mb-4">
                @if(store.index.locale == 'en'){
                {{ currentTab()!.TitleEn }}
                }@else {
                {{ currentTab()!.TitleAr }}
                }
              </h2>
              <div *ngFor="let section of currentTabSections() | sortByOrder: 'SectionOrder' let i = index"
                class="p-0 sm:p-3 md:p-6 rounded-lg mb-6 border-b border-gray-400 rounded-b-none w-full"
                [ngClass]="{ 'border-b-0 rounded-b-lg': i === currentTabSections().length - 1 }"
                [id]="section.SectionID">
                <h2 class="text-lg min-[340px]:text-xl font-semibold text-gray-800 mb-4">
                  @if(store.index.locale == 'en'){
                  {{ section.TitleEn }}
                  }@else {
                  {{ section.TitleAr }}
                  }
                </h2>
                <div class="flex flex-col gap-x-6 gap-y-4 w-full">
                  <ng-container *ngFor="let row of getGroupedFieldsForSection(section.SectionOrder)">
                    <div class="flex flex-wrap gap-6 w-full">
                      <app-dynamic-field *ngFor="let field of row" [field]="field" [form]="wizardForm"
                        (isHidden)="onFieldHidden(field, $event, section.FKNavigationTabID)" [actions]="actions"
                        (fieldChanged)="onFieldChanged($event)" (uploadComplete)="uploadComplete($event)"
                        style="width: 100%;" (emitLoadingState)="onFileLoading($event)"
                        [ngClass]="{ 'w-full': field.FieldType === 2 || field.FieldType === 9 || field.FieldType === 8 ||
                                  checkScreenSizeForFields(), 'flex-1': field.FieldType !== 2, 'hidden': fieldVisibilityMap[field.InternalFieldName] || !field.FieldVisible }">
                      </app-dynamic-field>
                    </div>
                  </ng-container>
                </div>
              </div>
            </div>
            }

            <div class="flex flex-col sm:flex-row justify-end gap-2 mt-8">
              <ng-container *ngFor="let action of actions | sortByOrder: 'ActionSortOrder'">
                @if(visibleTabs()){
                @if((action.TitleEN === 'Send Request' && currentTabIndex() === visibleTabs()!.length) ||
                (action.TitleEN
                === 'Save Draft' && shouldShowSaveDraft(action)) || (action.TitleEN === 'Previous' && currentTabIndex()
                !== 1) || (action.TitleEN === 'Next' && currentTabIndex() !== visibleTabs()!.length)){

                <button [disabled]="apiLoading" [ngClass]="{
                                          'btn btn-primary': action.TitleEN === 'Send Request',
                                          'bg-[#60583d] text-white': action.TitleEN === 'Save Draft',
                                          'cursor-not-allowed': (action.TitleEN === 'Next' && currentTabIndex() === visibleTabs()!.length) || (action.TitleEN === 'Previous' && currentTabIndex() === 1),
                                          'me-auto border btn-control previous-btn ': (action.TitleEN === 'Previous'),
                                             'btn-control next-btn': (action.TitleEN === 'Next'),
                                          '!bg-opacity-90': apiLoading || calcApiLoading
                              }" class="py-2 px-4 rounded-md font-semibold flex gap-1 items-center justify-center"
                  (click)="handleAction(action)">

                  @if(store.index.locale == 'en'){
                  {{ action.TitleEN }}
                  }@else {
                  {{ action.TitleAR }}
                  }
                </button>
                }@else if(currentTabIndex() === visibleTabs()!.length && action.TitleEN !== 'Next' && action.TitleEN !==
                'Previous'){
                <button [disabled]="apiLoading" [ngClass]="{
                                          '!bg-opacity-90': apiLoading || calcApiLoading,
                                          'hidden': uiExtraHidden(action)
                              }"
                  class="py-2 px-4 btn btn-primary rounded-md font-semibold flex gap-1 items-center justify-center"
                  (click)="handleAction(action)">
                  @if(store.index.locale == 'en'){
                  {{ action.TitleEN }}
                  }@else {
                  {{ action.TitleAR }}
                  }
                </button>
                }
                }
              </ng-container>
            </div>
            <!-- <app-ai-popup [isOpened]="aiPopupFirstInitFlag()" (closed)="onAiPopupClosed($event)"></app-ai-popup> -->
            }
          </form>
          <!-- <app-licenses-reminder-modal [isOpened]="true" status="pending" number="2" licenseNumber="2024-SALA- 000555"
                       applicationType="طلب ترخيص شؤون رياضية" expiryDate="2025-12-02"></app-licenses-reminder-modal> -->
          <!-- <app-licenses-reminder-modal [isOpened]="true" status="completed" number="2" licenseNumber="2024-SALA-000555"
                       applicationType="طلب ترخيص شؤون رياضية" expiryDate="2025-12-02"></app-licenses-reminder-modal> -->
          <!-- <app-reject-modal [isOpened]="true"></app-reject-modal> -->
          <!--  <app-payment-modal [isOpened]="true" payment="start" licenseNumber="2024-SALA-000555" 
                        title="تمت عملية الدفع بنجاح"
                        amount="1000"></app-payment-modal> -->
        </div>
        }


      </div>
    </div>
  </ng-template>

  <ng-container *ngIf="phaseIDs() && phaseIDs().length > 0; else noPhases">
    <div class="flex-1 w-full min-w-0 relative">

      @for(phase of phaseIDs(); track $index){
      <div class="phase-section" [ngClass]="{
        'hidden': phase.LookupID !== currentPhaseIndex()
      }">

        <ng-container *ngTemplateOutlet="tabsContent; 
              context: { tabs: phasesWithTabs()[phase.LookupID] }">
        </ng-container>
      </div>
      }
    </div>

  </ng-container>

  <ng-template #noPhases>
    <ng-container *ngTemplateOutlet="tabsContent; 
      context: { tabs: visibleNavigationTabs() }">
    </ng-container>
  </ng-template>

</div>