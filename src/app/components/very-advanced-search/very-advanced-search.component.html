@if(ServicesType() && searchForm){
<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-5 gap-3 my-3">
    <h2 class="text-3xl font-bold flex items-center gap-2">
        @if (isAdvancedSearchCollapsed()) {
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        {{ translations()?.AdvancedSearch?.label}}
        }

    </h2>

    <button type="button" (click)="toggleAdvancedSearchView()"
        class="btn flex items-center gap-2 shadow-sm hover:shadow-md transition-all"
        [ngClass]="isAdvancedSearchCollapsed() ? 'btn-outline-primary' : 'btn-primary'">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
        </svg>
        {{ isAdvancedSearchCollapsed() ? translations()?.search?.label : translations()?.AdvancedSearch?.label }}

    </button>
</div>
<ng-container [ngSwitch]="ServicesType()">
    <ng-container *ngSwitchCase="'SportAffairServices'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="OwnerName">
                            {{ translations()?.OwnerNameTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerName" id="OwnerName" class="form-input "
                            formControlName="OwnerName">
                    </div>
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label for="service" class="text-gray-600">{{ translations()?.ServiceType?.label }}</label>
                        <ng-select type="text" name="ServiceID" id="ServiceID" formControlName="ServiceID"
                            class="custom-multiselect cursor-pointer" [searchable]="true" [clearable]="false"
                            [multiple]="true" bindValue="ServiceID" [items]="serviceIDLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'ServiceTitleEn': 'ServiceTitleAr'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                    <!-- new fields ---------------------------------------- -->
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyName">
                            {{ translations()?.CompanyNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyName" id="CompanyName" class="form-input "
                            formControlName="CompanyName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyNameEn">
                            {{ translations()?.CompanyNameEnTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyNameEn" id="CompanyNameEn" class="form-input "
                            formControlName="CompanyNameEn">
                    </div>
                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>
                    <!-- new fields ---------------------------------------- -->
                </div>

                <!-- Row 2 -->
                <!-- <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    




                </div> -->



                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'SportOrganizationService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>


                    <div>
                        <label for="service" class="text-gray-600">{{ translations()?.ServiceType?.label }}</label>
                        <ng-select type="text" name="ServiceID" id="ServiceID" formControlName="ServiceID"
                            class="custom-multiselect cursor-pointer" [searchable]="true" [clearable]="false"
                            [multiple]="true" bindValue="ServiceID" [items]="serviceIDLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'ServiceTitleEn': 'ServiceTitleAr'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                    <!-- new fields ---------------------------------------- -->
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyName">
                            {{ translations()?.SportOrganizationServiceCompanyNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyName" id="CompanyName" class="form-input "
                            formControlName="CompanyName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyNameEn">
                            {{ translations()?.SportOrganizationServiceCompanyNameEnTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyNameEn" id="CompanyNameEn" class="form-input "
                            formControlName="CompanyNameEn">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>
                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>
                </div>

                <!-- Row 2 -->
                <!--
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    
                    </div>
                    -->



                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'SportEventService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>

                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>
                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                </div>




                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'YouthEventService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>

                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerQID">
                            {{ translations()?.OwnerQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerQID" id="OwnerQID" class="form-input " formControlName="OwnerQID">
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerName">
                            {{ translations()?.OwnerNameTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerName" id="OwnerName" class="form-input "
                            formControlName="OwnerName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>

                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    @if(empLookup()){
                    <div>
                        <label for="users" class="text-gray-600">
                            {{ translations()?.usersTitleInput?.label }}
                        </label>
                        <ng-select type="text" name="users" class="custom-multiselect cursor-pointer" appendTo="body"
                            [searchable]="true" (click)="$event.stopPropagation()" [clearable]="false"
                            formControlName="users" [items]="empLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'NameEn': 'Name'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>
                    }
                </div>




                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'YouthPermitService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>

                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerQID">
                            {{ translations()?.OwnerQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerQID" id="OwnerQID" class="form-input " formControlName="OwnerQID">
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerName">
                            {{ translations()?.OwnerNameTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerName" id="OwnerName" class="form-input "
                            formControlName="OwnerName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>

                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    @if(empLookup()){
                    <div>
                        <label for="users" class="text-gray-600">
                            {{ translations()?.usersTitleInput?.label }}
                        </label>
                        <ng-select type="text" name="users" class="custom-multiselect cursor-pointer" appendTo="body"
                            [searchable]="true" (click)="$event.stopPropagation()" [clearable]="false"
                            formControlName="users" [items]="empLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'NameEn': 'Name'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>
                    }
                </div>




                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'YouthActivitiesService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>

                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerQID">
                            {{ translations()?.OwnerQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerQID" id="OwnerQID" class="form-input " formControlName="OwnerQID">
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerName">
                            {{ translations()?.OwnerNameTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerName" id="OwnerName" class="form-input "
                            formControlName="OwnerName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>

                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    @if(empLookup()){
                    <div>
                        <label for="users" class="text-gray-600">
                            {{ translations()?.usersTitleInput?.label }}
                        </label>
                        <ng-select type="text" name="users" class="custom-multiselect cursor-pointer" appendTo="body"
                            [searchable]="true" (click)="$event.stopPropagation()" [clearable]="false"
                            formControlName="users" [items]="empLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'NameEn': 'Name'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>
                    }
                </div>




                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">

                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                            class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>

                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'YouthCenterService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>

                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerQID">
                            {{ translations()?.OwnerQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerQID" id="OwnerQID" class="form-input " formControlName="OwnerQID">
                    </div>

                    <div>
                        <label class="text-gray-600" for="OwnerName">
                            {{ translations()?.OwnerNameTitleInput?.label }}
                        </label>
                        <input type="text" name="OwnerName" id="OwnerName" class="form-input "
                            formControlName="OwnerName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>

                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    @if(empLookup()){
                    <div>
                        <label for="users" class="text-gray-600">
                            {{ translations()?.usersTitleInput?.label }}
                        </label>
                        <ng-select type="text" name="users" class="custom-multiselect cursor-pointer" appendTo="body"
                            [searchable]="true" (click)="$event.stopPropagation()" [clearable]="false"
                            formControlName="users" [items]="empLookup() || []"
                            [bindLabel]="store.index.locale == 'en'? 'NameEn': 'Name'"
                            [placeholder]="translations()?.LookupDefault.label"></ng-select>
                    </div>
                    }
                </div>




                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">

                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                            class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>

                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'MembershipService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label for="MembershipNumber" class="text-gray-600">{{ translations()?.MembershipNumberTitleInput?.label
                            }}</label>
                        <div class="relative">
                            <input id="MembershipNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.MembershipNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>


                    <div>
                        <label for="club" class="text-gray-600">{{ translations()?.ClubName?.label || (isArabic ? 'اسم
                            النادي' : 'Club Name')
                            }}</label>
                        <ng-select [multiple]="true" [items]="clubNames" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkClubID"
                            [placeholder]="getPlaceholderText('FkClubID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkClubID')">
                        </ng-select>
                    </div>
                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                    
                </div>





                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.MembershipServicelicenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.MembershipServicelicenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'GeneralAssemplyService'">
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label for="MembershipNumber" class="text-gray-600">{{ translations()?.MembershipNumberTitleInput?.label
                            }}</label>
                        <div class="relative">
                            <input id="MembershipNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.MembershipNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>


                    <div>
                        <label for="club" class="text-gray-600">{{ translations()?.ClubName?.label || (isArabic ? 'اسم
                            النادي' : 'Club Name')
                            }}</label>
                        <ng-select [multiple]="true" [items]="clubNames" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkClubID"
                            [placeholder]="getPlaceholderText('FkClubID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkClubID')">
                        </ng-select>
                    </div>
                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                    
                </div>





                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.MembershipServicelicenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.MembershipServicelicenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
    <ng-container *ngSwitchDefault>
        <div *ngIf="isAdvancedSearchCollapsed()" class="space-y-4">
            <!-- Row 1 -->
            <form [formGroup]="searchForm" (ngSubmit)="submitForm()">

                <!-- Row 1 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label class="text-gray-600" for="ApplicantQID">
                            {{ translations()?.ApplicantQIDTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantQID" id="ApplicantQID" class="form-input "
                            formControlName="ApplicantQID">
                    </div>
                    <div>
                        <label class="text-gray-600" for="ApplicantName">
                            {{ translations()?.ApplicantNameTitleInput?.label }}
                        </label>
                        <input type="text" name="ApplicantName" id="ApplicantName" class="form-input "
                            formControlName="ApplicantName">
                    </div>
                    <div>
                        <label for="applicationNumber" class="text-gray-600">{{ translations()?.requestNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="applicationNumber" type="text" formControlName="ApplicationNumber"
                                [placeholder]="translations()?.requestNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الطلب' : 'Enter request number')"
                                class="form-input ltr:pr-8 rtl:pl-8" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-2 rtl:left-2 text-gray-400">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="licenseNumber" class="text-gray-600">{{ translations()?.licenseNumber?.label
                            }}</label>
                        <div class="relative">
                            <input id="licenseNumber" type="text" formControlName="ApprovedLicense"
                                [placeholder]="translations()?.licenseNumberPlaceholder?.label || (isArabic ? 'أدخل رقم الرخصة' : 'Enter License Number')"
                                class="form-input ltr:pr-10 rtl:pl-10" />
                            <div class="absolute top-1/2 -translate-y-1/2 ltr:right-3 rtl:left-3 text-gray-400">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="text-gray-600" for="requestType">{{ translations()?.RequestTypeID?.label
                            }}</label>
                        <ng-select [multiple]="true" [items]="Requests" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="ID" formControlName="RequestTypeID"
                            [placeholder]="getPlaceholderText('RequestTypeID')" class="custom-multiselect"
                            appendTo="body" [clearable]="shouldShowClearButton('RequestTypeID')">
                        </ng-select>
                    </div>
                    <div>
                        <label for="service" class="text-gray-600">{{ translations()?.ServiceType?.label }}</label>
                        <ng-select [multiple]="true" [items]="services"
                            [bindLabel]="isArabic ? 'ServiceTitleAr' : 'ServiceTitleEn'" bindValue="ServiceID"
                            formControlName="ServiceID" [placeholder]="getPlaceholderText('ServiceID')"
                            class="custom-multiselect" appendTo="body" (change)="getRequests($event)"
                            [clearable]="shouldShowClearButton('ServiceID')">
                        </ng-select>
                    </div>

                    <div>
                        <label for="procedure" class="text-gray-600">{{ translations()?.ProcessID?.label }}</label>
                        <ng-select [multiple]="true" [items]="procedures" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkProcessID"
                            [placeholder]="getPlaceholderText('FkProcessID')" class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkProcessID')">
                        </ng-select>
                    </div>
                    <!-- new fields ---------------------------------------- -->
                    <div>
                        <label class="text-gray-600" for="CommercialName">
                            {{ translations()?.CommercialNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialName" id="CommercialName" class="form-input "
                            formControlName="CommercialName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CommercialRegistrationNo">
                            {{ translations()?.CommercialRegistrationNoTitleInput?.label }}
                        </label>
                        <input type="text" name="CommercialRegistrationNo" id="CommercialRegistrationNo"
                            class="form-input " formControlName="CommercialRegistrationNo">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyName">
                            {{ translations()?.CompanyNameTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyName" id="CompanyName" class="form-input "
                            formControlName="CompanyName">
                    </div>
                    <div>
                        <label class="text-gray-600" for="CompanyNameEn">
                            {{ translations()?.CompanyNameEnTitleInput?.label }}
                        </label>
                        <input type="text" name="CompanyNameEn" id="CompanyNameEn" class="form-input "
                            formControlName="CompanyNameEn">
                    </div>
                    <div>
                        <label for="FkSecondaryActivityID" class="text-gray-600">{{
                            isArabic ? 'نوع النشاط' : 'Secondary Activity' }}</label>
                        <ng-select [items]="secondaryActivities" [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'"
                            bindValue="LookupID" formControlName="FkSecondaryActivityID"
                            [placeholder]="getPlaceholderText('FkSecondaryActivityID')" [multiple]="true"
                            [clearable]="true" class="custom-multiselect" id="FkSecondaryActivityID">
                        </ng-select>
                    </div>
                    <!-- new fields ---------------------------------------- -->
                </div>

                <!-- Row 2 -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 mb-4">
                    <div>
                        <label for="requestStatus" class="text-gray-600">{{ translations()?.Status?.label }}</label>
                        <ng-select [multiple]="true" [items]="requestStatuses"
                            [bindLabel]="isArabic ? 'TitleAr' : 'TitleEn'" bindValue="LookupID"
                            formControlName="FkStatusID" [placeholder]="getPlaceholderText('FkStatusID')"
                            class="custom-multiselect" appendTo="body"
                            [clearable]="shouldShowClearButton('FkStatusID')">
                        </ng-select>
                    </div>




                </div>



                <!-- Row 4: تواريخ الرخصة -->
                <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 mb-4">


                    <!-- تاريخ بداية الرخصة -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseStartDate?.label || (isArabic
                            ? 'تاريخ
                            بداية
                            الرخصة' : 'License Start Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseCreationDateTo"
                                    [attr.aria-label]="(translations()?.licenseStartDate?.label || 'تاريخ بداية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.licenseEndDate?.label || (isArabic ?
                            'تاريخ
                            نهاية
                            الرخصة' : 'License End Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateFrom"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="LicenseExpirationDateTo"
                                    [attr.aria-label]="(translations()?.licenseEndDate?.label || 'تاريخ نهاية الرخصة') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>

                    <!-- تاريخ التقديم -->
                    <div>
                        <label class="mb-2 block text-gray-600">{{ translations()?.creationDateInputTitle?.label ||
                            (isArabic ?
                            'تاريخ التقديم'
                            :
                            'Request Date') }}</label>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.from?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateFrom"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.from?.label || 'من')" />
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-sm font-semibold w-10">{{ translations()?.to?.label }}</label>
                                <input type="text" mwlFlatpickr [options]="basic" class="form-input"
                                    formControlName="CreationDateTo"
                                    [attr.aria-label]="(translations()?.requestDate?.label || 'تاريخ التقديم') + ' - ' + (translations()?.to?.label || 'إلى')" />
                            </div>
                        </div>
                    </div>


                </div>
                <div class="flex flex-wrap justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-200">


                    <!-- زر تغيير الوضع على اليمين - يظهر دائماً في نموذج البحث -->
                    <button type="button" (click)="toggleSearchView()"
                        class="btn btn-outline-primary flex items-center gap-2 shadow-sm hover:shadow-md transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                        </svg>
                        {{ translations()?.HideSearch?.label }}
                    </button>
                    <!-- الأزرار على الشمال -->
                    <div class="flex gap-3">
                        <button type="submit" class="btn btn-primary flex items-center gap-2"
                            aria-label="translations()?.search?.label">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            {{ translations()?.search?.label }}
                        </button>
                        <button type="button" (click)="resetData()" aria-label="translations()?.Reset?.label"
                             class="btn border border-gray-500 text-gray-700 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            {{ translations()?.Reset?.label }}
                        </button>
                    </div>
                </div>

            </form>
        </div>
    </ng-container>
</ng-container>
}